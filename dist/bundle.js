!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.toSq=function(e){return e*t.pxInSquare},t.toPx=function(e){return e/t.pxInSquare},t.pxInSquare=10,t}();e.Px=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(t,e,n,o,i){var a=this;this.getColor=function(){return a.color},this.setColor=function(t){a.color=t},this.getX=function(){return a.x},this.setX=function(t){a.x=t},this.getY=function(){return a.y},this.setY=function(t){a.y=t},this.getPosition=function(){return[a.x,a.y]},this.setPosition=function(t){a.x=t[0],a.y=t[1]},this.getContext=function(){return a.context},this.setContext=function(t){a.context=t},this.getSize=function(){return a.size},this.setSize=function(t){a.size=t},this.getStringPosititonInPx=function(){var t=a.getPosition();return r.Px.toPx(t[0])+","+r.Px.toPx(t[1])},this.getStringPosititon=function(){return a.getPosition().join(",")},this.update=function(){a.getContext().fillStyle=a.color,a.getContext().fillRect(a.x,a.y,a.size,a.size)},this.x=e,this.y=n,this.size=t,this.context=o,this.color=i};e.BaseEntity=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.VOID=0]="VOID",t[t.OBSTACLE=1]="OBSTACLE",t[t.TRASH=2]="TRASH"}(e.EntityType||(e.EntityType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(15),i=new r.Game(document.getElementById("canvas"),50),a=new o.Agent;i.start(),i.createControls(document),i.updateCallback=function(t){a.setNextAction(t)},i.endGameCallback=function(){a.reward(),console.log({rules:a.qtable.ruleCount()})};setInterval((function(){a.executeAction(document)}),1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n(0),i=n(7),a=n(9),c=n(11),u=n(12),s=n(14),f=function(t,e){var n=this;this.start=function(){n.clear(),n.reset(),n.garbageMan=r.GarbageManFactory.create(n.context,n.gameSize);var t=a.ObstacleFactory.generateFence(n.gameSize,n.context),e=a.ObstacleFactory.create(400,n.gameSize,n.context,[n.garbageMan.getStringPosititonInPx()].concat(t.except));n.obstacles=e.entities.concat(t.entities),n.trash=i.TrashFactory.create(50,n.gameSize,n.context,e.except),n.collider.add([n.garbageMan],n.obstacles,(function(t,e){n.endGameCallback&&n.endGameCallback(),n.start()})),n.collider.add([n.garbageMan],n.trash,(function(t,e){e.setPosition([-5e3,-5e3]),n.update()})),n.visions=u.VisionFactory.create(n.garbageMan.createVision(2),n.context),n.update()},this.update=function(){n.clear(),n.visions.forEach((function(t){t.update()})),n.garbageMan.update(),n.trash.forEach((function(t){t.update()})),n.obstacles.forEach((function(t){t.update()})),n.updateCallback&&n.updateCallback(s.StateMap.createStateMap(n.garbageMan.createVision(2),[n.obstacles,n.trash])),n.collider.check()},this.clear=function(){n.context.clearRect(0,0,n.canvas.width,n.canvas.height)},this.reset=function(){n.collider.reset()},this.move=function(t){n.garbageMan.move(t),n.visions.forEach((function(e){e.move(t)})),n.update()},this.controls=function(t){"38"==(t=t||window.event).keyCode?n.move("top"):"40"==t.keyCode?n.move("down"):"37"==t.keyCode?n.move("left"):"39"==t.keyCode?n.move("right"):"w"==t.key&&n.start()},this.createControls=function(t){t.onkeydown=n.controls},this.gameSize=e,this.canvas=t,this.canvas.width=o.Px.toSq(e),this.canvas.height=o.Px.toSq(e),this.context=t.getContext("2d"),this.collider=new c.Collider};e.Game=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),o=n(0),i=function(){function t(){}return t.create=function(t,e){var n=Math.floor(Math.random()*e),i=Math.floor(Math.random()*e);return new r.GarbageMan(o.Px.toSq(1),o.Px.toSq(n),o.Px.toSq(i),t,"red")},t}();e.GarbageManFactory=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(0),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createVision=function(t){for(var n=e.getPosition(),r=a.Px.toPx(n[0])-t,o=a.Px.toPx(n[1])-t,i=2*t+1,c=[],u=0;u<i;u++)for(var s=0;s<i;s++)c.push(r+s+","+(o+u));return c},e.move=function(t){switch(t){case"left":e.x-=e.size;break;case"right":e.x+=e.size;break;case"top":e.y-=e.size;break;case"down":e.y+=e.size}},e}return o(e,t),e}(i.BaseEntity);e.GarbageMan=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(0),i=function(){function t(){}return t.create=function(e,n,i,a){for(var c=[],u=0;u<e;u++){var s=t.generateUnique(n,a);a.push(s);var f=parseInt(s.split(",")[0]),l=parseInt(s.split(",")[1]);c.push(new r.Trash(o.Px.toSq(1),o.Px.toSq(f),o.Px.toSq(l),i,"blue"))}return c},t.generateUnique=function(e,n){var r=Math.floor(Math.random()*e)+","+Math.floor(Math.random()*e);return n.find((function(t){return t===r}))?t.generateUnique(e,n):r},t}();e.TrashFactory=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(2),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getType=function(){return a.EntityType.TRASH},e}return o(e,t),e}(i.BaseEntity);e.Trash=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(10),i=function(){function t(){}return t.create=function(e,n,i,a){for(var c=[],u=0;u<e;u++){var s=t.generateUnique(n,a);a.push(s);var f=parseInt(s.split(",")[0]),l=parseInt(s.split(",")[1]);c.push(new o.Obstacle(r.Px.toSq(1),r.Px.toSq(f),r.Px.toSq(l),i,"black"))}return{entities:c,except:a}},t.generateUnique=function(e,n){var r=Math.floor(Math.random()*e)+","+Math.floor(Math.random()*e);return n.find((function(t){return t===r}))?t.generateUnique(e,n):r},t.generateFence=function(t,e){for(var n=[],i=[],a=0;a<t;a++)i.push(a+",0"),n.push(new o.Obstacle(r.Px.toSq(1),r.Px.toSq(a),r.Px.toSq(0),e,"black")),i.push(a+","+(t-1)),n.push(new o.Obstacle(r.Px.toSq(1),r.Px.toSq(a),r.Px.toSq(t-1),e,"black"));for(var c=0;c<t;c++)i.push("0,"+c),n.push(new o.Obstacle(r.Px.toSq(1),r.Px.toSq(0),r.Px.toSq(c),e,"black")),i.push(t-1+","+c),n.push(new o.Obstacle(r.Px.toSq(1),r.Px.toSq(t-1),r.Px.toSq(c),e,"black"));return{entities:n,except:i}},t}();e.ObstacleFactory=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(2),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getType=function(){return a.EntityType.OBSTACLE},e}return o(e,t),e}(i.BaseEntity);e.Obstacle=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this;this.map=[],this.add=function(e,n,r){t.map.push({entities1:e,entities2:n,callback:r})},this.check=function(){var e=[];t.map.forEach((function(t,n){e[n]=[],t.entities1.forEach((function(t){e[n][t.getStringPosititon()]=t})),t.entities2.forEach((function(r){r.getStringPosititon()in e[n]&&t.callback(e[n][r.getStringPosititon()],r)}))}))},this.reset=function(){t.map=[]}};e.Collider=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),o=n(0),i=function(){function t(){}return t.create=function(t,e){var n=[];return t.forEach((function(t){var i=parseInt(t.split(",")[0]),a=parseInt(t.split(",")[1]);n.push(new r.Vision(o.Px.toSq(1),o.Px.toSq(i),o.Px.toSq(a),e,"yellow"))})),n},t}();e.VisionFactory=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.move=function(t){switch(t){case"left":e.x-=e.size;break;case"right":e.x+=e.size;break;case"top":e.y-=e.size;break;case"down":e.y+=e.size}},e}return o(e,t),e}(n(1).BaseEntity);e.Vision=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=function(){function t(){}return t.createStateMap=function(t,e){var n={};e.forEach((function(t){return t.forEach((function(t){return n[t.getStringPosititonInPx()]=t}))}));var o=[];return t.forEach((function(t){t in n?o.push(n[t].getType()):o.push(r.EntityType.VOID)})),o.join(",")},t}();e.StateMap=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),o=n(17),i=n(18),a=n(2),c=function(){var t=this;this.gamma=.8,this.alpha=.1,this.setNextAction=function(e){t.nextAction=t.getAction(e),t.frameBuffer.add(e,t.nextAction)},this.getAction=function(e){if(0==Math.ceil(1e5*Math.random())%90001)return o.Action.random();if(Object.keys(t.qtable.table).length<3e4)return o.Action.random();var n={up:t.qtable.getQ(e,o.Action.UP),down:t.qtable.getQ(e,o.Action.DOWN),left:t.qtable.getQ(e,o.Action.LEFT),right:t.qtable.getQ(e,o.Action.RIGHT)};switch(console.table(n),Object.keys(n).reduce((function(t,e){return n[t]>n[e]?t:e}))){case"up":return o.Action.UP;case"down":return o.Action.DOWN;case"left":return o.Action.LEFT;case"right":return o.Action.RIGHT}},this.executeAction=function(e){switch(t.nextAction){case o.Action.UP:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"38"}));break;case o.Action.DOWN:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"40"}));break;case o.Action.LEFT:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"37"}));break;case o.Action.RIGHT:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"39"}))}},this.reward=function(){for(var e=t.frameBuffer.buffer.length-1;e>=0;--e){var n=(t.frameBuffer.buffer.length-1)/2,r=t.frameBuffer.buffer[e].state,i=r.split(","),c=void 0;if(t.frameBuffer.buffer[e-1]){var u=t.frameBuffer.buffer[e-1];if(parseInt(i[n])===a.EntityType.OBSTACLE?c=-5:parseInt(i[n])===a.EntityType.TRASH?c=5:parseInt(i[n])===a.EntityType.VOID&&(c=1),c){var s=Math.max(t.qtable.getQ(r,o.Action.UP),t.qtable.getQ(r,o.Action.DOWN),t.qtable.getQ(r,o.Action.LEFT),t.qtable.getQ(r,o.Action.RIGHT)),f=t.alpha*(c+t.gamma*s-t.qtable.getQ(u.state,u.action));t.qtable.setQ(u.state,u.action,f)}}}t.frameBuffer.clear()},this.qtable=new r.Qtable,this.frameBuffer=new i.FrameBuffer};e.Agent=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this;this.table={},this.getQ=function(e,n){var r=e+","+n;return r in t.table?t.table[r]:0},this.setQ=function(e,n,r){var o=e+","+n;o in t.table||(t.table[o]=0),t.table[o]+=r},this.ruleCount=function(){return Object.keys(t.table).length}};e.Qtable=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.UP=1,t.DOWN=2,t.LEFT=3,t.RIGHT=4,t.toArray=function(){return Object.values(t)},t.random=function(){var t=[1,2,3,4];return t[Math.random()*t.length|0]},t}();e.Action=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this;this.buffer=[],this.add=function(e,n){t.buffer.push({state:e,action:n})},this.clear=function(){t.buffer=[]}};e.FrameBuffer=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvUHgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvQmFzZUVudGl0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9FbnRpdHlUeXBlLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvR2FtZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9HYXJiYWdlTWFuRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9HYXJiYWdlTWFuLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL1RyYXNoRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9UcmFzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9PYnN0YWNsZUZhY3RvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvT2JzdGFjbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvQ29sbGlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvVmlzaW9uRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9WaXNpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvU3RhdGVNYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3FsZWFybmluZy9BZ2VudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcWxlYXJuaW5nL1F0YWJsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcWxlYXJuaW5nL0FjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcWxlYXJuaW5nL0ZyYW1lQnVmZmVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidG9TcSIsInBpeGVscyIsIlB4IiwicHhJblNxdWFyZSIsInRvUHgiLCJzcXVhcmUiLCJzaXplIiwieCIsInkiLCJjb250ZXh0IiwiY29sb3IiLCJnZXRDb2xvciIsInNldENvbG9yIiwiZ2V0WCIsInNldFgiLCJnZXRZIiwic2V0WSIsImdldFBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJwb3NpdGlvbiIsImdldENvbnRleHQiLCJzZXRDb250ZXh0IiwiZ2V0U2l6ZSIsInNldFNpemUiLCJnZXRTdHJpbmdQb3NpdGl0b25JblB4IiwicG9zIiwiZ2V0U3RyaW5nUG9zaXRpdG9uIiwiam9pbiIsInVwZGF0ZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwidGhpcyIsIkJhc2VFbnRpdHkiLCJFbnRpdHlUeXBlIiwiZ2FtZSIsIkdhbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWdlbnQiLCJBZ2VudCIsInN0YXJ0IiwiY3JlYXRlQ29udHJvbHMiLCJ1cGRhdGVDYWxsYmFjayIsInN0YXRlIiwic2V0TmV4dEFjdGlvbiIsImVuZEdhbWVDYWxsYmFjayIsInJld2FyZCIsImNvbnNvbGUiLCJsb2ciLCJydWxlcyIsInF0YWJsZSIsInJ1bGVDb3VudCIsInNldEludGVydmFsIiwiZXhlY3V0ZUFjdGlvbiIsImNhbnZhcyIsImdhbWVTaXplIiwiY2xlYXIiLCJyZXNldCIsImdhcmJhZ2VNYW4iLCJHYXJiYWdlTWFuRmFjdG9yeSIsImZlbmNlIiwiT2JzdGFjbGVGYWN0b3J5IiwiZ2VuZXJhdGVGZW5jZSIsIm9ic3RhY2xlcyIsImNvbmNhdCIsImV4Y2VwdCIsImVudGl0aWVzIiwidHJhc2giLCJUcmFzaEZhY3RvcnkiLCJjb2xsaWRlciIsImFkZCIsIm9iamVjdDEiLCJvYmplY3QyIiwidmlzaW9ucyIsIlZpc2lvbkZhY3RvcnkiLCJjcmVhdGVWaXNpb24iLCJmb3JFYWNoIiwiZWxlbWVudCIsIlN0YXRlTWFwIiwiY3JlYXRlU3RhdGVNYXAiLCJjaGVjayIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwibW92ZSIsImRpcmVjdGlvbiIsImNvbnRyb2xzIiwiZSIsIndpbmRvdyIsImV2ZW50Iiwia2V5Q29kZSIsIm9ua2V5ZG93biIsIkNvbGxpZGVyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiR2FyYmFnZU1hbiIsInJhZGl1cyIsImJhc2VQb3NpdGlvbiIsImZ1bGxSYWRpdXMiLCJwb3NpdGlvbnMiLCJyb3ciLCJjb2x1bW4iLCJwdXNoIiwiY291bnQiLCJnZW5lcmF0ZVVuaXF1ZSIsInBhcnNlSW50Iiwic3BsaXQiLCJUcmFzaCIsImZpbmQiLCJnZXRUeXBlIiwiVFJBU0giLCJPYnN0YWNsZSIsIk9CU1RBQ0xFIiwibWFwIiwiZW50aXRpZXMxIiwiZW50aXRpZXMyIiwiY2FsbGJhY2siLCJjb2xsaWRlZXMiLCJjb2xsaWRlIiwiaW5kZXgiLCJWaXNpb24iLCJ2aXNpb24iLCJzdGF0ZU1hcCIsImVudGl0eSIsIlZPSUQiLCJnYW1tYSIsImFscGhhIiwibmV4dEFjdGlvbiIsImdldEFjdGlvbiIsImZyYW1lQnVmZmVyIiwiY2VpbCIsIkFjdGlvbiIsImtleXMiLCJ0YWJsZSIsImxlbmd0aCIsInJld2FyZHMiLCJ1cCIsImdldFEiLCJVUCIsImRvd24iLCJET1dOIiwibGVmdCIsIkxFRlQiLCJyaWdodCIsIlJJR0hUIiwicmVkdWNlIiwiYSIsImIiLCJkaXNwYXRjaEV2ZW50IiwiS2V5Ym9hcmRFdmVudCIsImJ1ZmZlciIsIm1pZGRsZUluZGV4IiwiYXJyYXlTdGF0ZSIsInByZXZpb3VzRnJhbWUiLCJvcHRpbWFsRnV0dXJlVmFsdWUiLCJtYXgiLCJ1cGRhdGVWYWx1ZSIsImFjdGlvbiIsInNldFEiLCJRdGFibGUiLCJGcmFtZUJ1ZmZlciIsImNvbmZpZyIsInRvQXJyYXkiLCJ2YWx1ZXMiLCJhcnJheSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxF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dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiZXhwb3J0IGNsYXNzIFB4IHtcbiAgcHVibGljIHN0YXRpYyBweEluU3F1YXJlOiBudW1iZXIgPSAxMDtcblxuICBwdWJsaWMgc3RhdGljIHRvU3EocGl4ZWxzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBwaXhlbHMgKiBQeC5weEluU3F1YXJlO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyB0b1B4KHNxdWFyZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gc3F1YXJlIC8gUHgucHhJblNxdWFyZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUHggfSBmcm9tICcuLi91dGlsL1B4JztcblxuZXhwb3J0IGNsYXNzIEJhc2VFbnRpdHkge1xuICBwcm90ZWN0ZWQgeDogbnVtYmVyO1xuICBwcm90ZWN0ZWQgeTogbnVtYmVyO1xuICBwcm90ZWN0ZWQgY29udGV4dDogYW55O1xuICBwcm90ZWN0ZWQgc2l6ZTogbnVtYmVyO1xuICBwcm90ZWN0ZWQgY29sb3I6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihzaXplOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjb250ZXh0OiBhbnksIGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgfVxuXG4gIGdldENvbG9yID0gKCk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gIH07XG5cbiAgc2V0Q29sb3IgPSAoY29sb3I6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgfTtcblxuICBnZXRYID0gKCk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIHRoaXMueDtcbiAgfTtcblxuICBzZXRYID0gKHg6IG51bWJlcikgPT4ge1xuICAgIHRoaXMueCA9IHg7XG4gIH07XG5cbiAgZ2V0WSA9ICgpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiB0aGlzLnk7XG4gIH07XG5cbiAgc2V0WSA9ICh5OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLnkgPSB5O1xuICB9O1xuXG4gIGdldFBvc2l0aW9uID0gKCk6IG51bWJlcltdID0+IHtcbiAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTtcbiAgfTtcblxuICBzZXRQb3NpdGlvbiA9IChwb3NpdGlvbjogbnVtYmVyW10pID0+IHtcbiAgICB0aGlzLnggPSBwb3NpdGlvblswXTtcbiAgICB0aGlzLnkgPSBwb3NpdGlvblsxXTtcbiAgfTtcblxuICBnZXRDb250ZXh0ID0gKCk6IGFueSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgfTtcblxuICBzZXRDb250ZXh0ID0gKGNvbnRleHQ6IGFueSkgPT4ge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIH07XG5cbiAgZ2V0U2l6ZSA9ICgpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiB0aGlzLnNpemU7XG4gIH07XG5cbiAgc2V0U2l6ZSA9IChzaXplOiBudW1iZXIpID0+IHtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICB9O1xuXG4gIGdldFN0cmluZ1Bvc2l0aXRvbkluUHggPSAoKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBwb3MgPSB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgcmV0dXJuIGAke1B4LnRvUHgocG9zWzBdKX0sJHtQeC50b1B4KHBvc1sxXSl9YDtcbiAgfTtcblxuICBnZXRTdHJpbmdQb3NpdGl0b24gPSAoKTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLmpvaW4oJywnKTtcbiAgfTtcblxuICB1cGRhdGUgPSAoKSA9PiB7XG4gICAgdGhpcy5nZXRDb250ZXh0KCkuZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcbiAgICB0aGlzLmdldENvbnRleHQoKS5maWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy5zaXplLCB0aGlzLnNpemUpO1xuICB9O1xufVxuIiwiZXhwb3J0IGVudW0gRW50aXR5VHlwZSB7XG4gIFZPSUQgPSAwLFxuICBPQlNUQUNMRSA9IDEsXG4gIFRSQVNIID0gMlxufVxuIiwiaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vZ2FtZS9HYW1lJztcbmltcG9ydCB7IEFnZW50IH0gZnJvbSAnLi9xbGVhcm5pbmcvQWdlbnQnO1xuXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpLCA1MCk7XG5jb25zdCBhZ2VudCA9IG5ldyBBZ2VudCgpO1xuXG5nYW1lLnN0YXJ0KCk7XG5nYW1lLmNyZWF0ZUNvbnRyb2xzKGRvY3VtZW50KTtcblxuZ2FtZS51cGRhdGVDYWxsYmFjayA9IChzdGF0ZTogc3RyaW5nKSA9PiB7XG4gIGFnZW50LnNldE5leHRBY3Rpb24oc3RhdGUpO1xufTtcblxuZ2FtZS5lbmRHYW1lQ2FsbGJhY2sgPSAoKSA9PiB7XG4gIGFnZW50LnJld2FyZCgpO1xuICBjb25zb2xlLmxvZyh7IHJ1bGVzOiBhZ2VudC5xdGFibGUucnVsZUNvdW50KCkgfSk7XG59O1xuXG5jb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgYWdlbnQuZXhlY3V0ZUFjdGlvbihkb2N1bWVudCk7XG59LCAxKTtcbiIsImltcG9ydCB7IFRyYXNoIH0gZnJvbSAnLi9UcmFzaCc7XG5pbXBvcnQgeyBHYXJiYWdlTWFuIH0gZnJvbSAnLi9HYXJiYWdlTWFuJztcbmltcG9ydCB7IEdhcmJhZ2VNYW5GYWN0b3J5IH0gZnJvbSAnLi9HYXJiYWdlTWFuRmFjdG9yeSc7XG5pbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuaW1wb3J0IHsgVHJhc2hGYWN0b3J5IH0gZnJvbSAnLi9UcmFzaEZhY3RvcnknO1xuaW1wb3J0IHsgT2JzdGFjbGVGYWN0b3J5IH0gZnJvbSAnLi9PYnN0YWNsZUZhY3RvcnknO1xuaW1wb3J0IHsgT2JzdGFjbGUgfSBmcm9tICcuL09ic3RhY2xlJztcbmltcG9ydCB7IENvbGxpZGVyIH0gZnJvbSAnLi9Db2xsaWRlcic7XG5pbXBvcnQgeyBCYXNlRW50aXR5IH0gZnJvbSAnLi9CYXNlRW50aXR5JztcbmltcG9ydCB7IFZpc2lvbkZhY3RvcnkgfSBmcm9tICcuL1Zpc2lvbkZhY3RvcnknO1xuaW1wb3J0IHsgVmlzaW9uIH0gZnJvbSAnLi9WaXNpb24nO1xuaW1wb3J0IHsgU3RhdGVNYXAgfSBmcm9tICcuL1N0YXRlTWFwJztcblxuZXhwb3J0IGNsYXNzIEdhbWUge1xuICBjb250ZXh0OiBhbnk7XG4gIGNhbnZhczogYW55O1xuICB0cmFzaDogVHJhc2hbXTtcbiAgZ2FyYmFnZU1hbjogR2FyYmFnZU1hbjtcbiAgZ2FtZVNpemU6IG51bWJlcjtcbiAgb2JzdGFjbGVzOiBPYnN0YWNsZVtdO1xuICBjb2xsaWRlcjogQ29sbGlkZXI7XG4gIHZpc2lvbnM6IFZpc2lvbltdO1xuICB1cGRhdGVDYWxsYmFjaz86IENhbGxhYmxlRnVuY3Rpb247XG4gIGVuZEdhbWVDYWxsYmFjaz86IENhbGxhYmxlRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IoY2FudmFzOiBhbnksIGdhbWVTaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLmdhbWVTaXplID0gZ2FtZVNpemU7XG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSBQeC50b1NxKGdhbWVTaXplKTtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBQeC50b1NxKGdhbWVTaXplKTtcbiAgICB0aGlzLmNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IENvbGxpZGVyKCk7XG4gIH1cblxuICBzdGFydCA9ICgpID0+IHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5yZXNldCgpO1xuXG4gICAgdGhpcy5nYXJiYWdlTWFuID0gR2FyYmFnZU1hbkZhY3RvcnkuY3JlYXRlKHRoaXMuY29udGV4dCwgdGhpcy5nYW1lU2l6ZSk7XG5cbiAgICBjb25zdCBmZW5jZSA9IE9ic3RhY2xlRmFjdG9yeS5nZW5lcmF0ZUZlbmNlKHRoaXMuZ2FtZVNpemUsIHRoaXMuY29udGV4dCk7XG5cbiAgICBjb25zdCBvYnN0YWNsZXMgPSBPYnN0YWNsZUZhY3RvcnkuY3JlYXRlKFxuICAgICAgNDAwLFxuICAgICAgdGhpcy5nYW1lU2l6ZSxcbiAgICAgIHRoaXMuY29udGV4dCxcbiAgICAgIFt0aGlzLmdhcmJhZ2VNYW4uZ2V0U3RyaW5nUG9zaXRpdG9uSW5QeCgpXS5jb25jYXQoZmVuY2UuZXhjZXB0KVxuICAgICk7XG5cbiAgICB0aGlzLm9ic3RhY2xlcyA9IG9ic3RhY2xlcy5lbnRpdGllcy5jb25jYXQoZmVuY2UuZW50aXRpZXMpO1xuXG4gICAgdGhpcy50cmFzaCA9IFRyYXNoRmFjdG9yeS5jcmVhdGUoNTAsIHRoaXMuZ2FtZVNpemUsIHRoaXMuY29udGV4dCwgb2JzdGFjbGVzLmV4Y2VwdCk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZChbdGhpcy5nYXJiYWdlTWFuXSwgdGhpcy5vYnN0YWNsZXMsIChvYmplY3QxOiBCYXNlRW50aXR5LCBvYmplY3QyOiBCYXNlRW50aXR5KSA9PiB7XG4gICAgICBpZiAodGhpcy5lbmRHYW1lQ2FsbGJhY2spIHRoaXMuZW5kR2FtZUNhbGxiYWNrKCk7XG4gICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZChbdGhpcy5nYXJiYWdlTWFuXSwgdGhpcy50cmFzaCwgKG9iamVjdDE6IEJhc2VFbnRpdHksIG9iamVjdDI6IEJhc2VFbnRpdHkpID0+IHtcbiAgICAgIG9iamVjdDIuc2V0UG9zaXRpb24oWy01MDAwLCAtNTAwMF0pO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlzaW9ucyA9IFZpc2lvbkZhY3RvcnkuY3JlYXRlKHRoaXMuZ2FyYmFnZU1hbi5jcmVhdGVWaXNpb24oMiksIHRoaXMuY29udGV4dCk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9O1xuXG4gIHVwZGF0ZSA9ICgpID0+IHtcbiAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICB0aGlzLnZpc2lvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGVsZW1lbnQudXBkYXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmdhcmJhZ2VNYW4udXBkYXRlKCk7XG5cbiAgICB0aGlzLnRyYXNoLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LnVwZGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vYnN0YWNsZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGVsZW1lbnQudXBkYXRlKCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy51cGRhdGVDYWxsYmFjaylcbiAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2soU3RhdGVNYXAuY3JlYXRlU3RhdGVNYXAodGhpcy5nYXJiYWdlTWFuLmNyZWF0ZVZpc2lvbigyKSwgW3RoaXMub2JzdGFjbGVzLCB0aGlzLnRyYXNoXSkpO1xuXG4gICAgdGhpcy5jb2xsaWRlci5jaGVjaygpO1xuICB9O1xuXG4gIGNsZWFyID0gKCkgPT4ge1xuICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gIH07XG5cbiAgcmVzZXQgPSAoKSA9PiB7XG4gICAgdGhpcy5jb2xsaWRlci5yZXNldCgpO1xuICB9O1xuXG4gIG1vdmUgPSAoZGlyZWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLmdhcmJhZ2VNYW4ubW92ZShkaXJlY3Rpb24pO1xuXG4gICAgdGhpcy52aXNpb25zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50Lm1vdmUoZGlyZWN0aW9uKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH07XG5cbiAgY29udHJvbHMgPSAoZTogYW55KSA9PiB7XG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuXG4gICAgaWYgKGUua2V5Q29kZSA9PSAnMzgnKSB7XG4gICAgICAvLyB1cCBhcnJvd1xuICAgICAgdGhpcy5tb3ZlKCd0b3AnKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnNDAnKSB7XG4gICAgICAvLyBkb3duIGFycm93XG4gICAgICB0aGlzLm1vdmUoJ2Rvd24nKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnMzcnKSB7XG4gICAgICAvLyBsZWZ0IGFycm93XG4gICAgICB0aGlzLm1vdmUoJ2xlZnQnKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnMzknKSB7XG4gICAgICAvLyByaWdodCBhcnJvd1xuICAgICAgdGhpcy5tb3ZlKCdyaWdodCcpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT0gJ3cnKSB7XG4gICAgICAvLyByaWdodCBhcnJvd1xuICAgICAgdGhpcy5zdGFydCgpO1xuICAgIH1cbiAgfTtcblxuICBjcmVhdGVDb250cm9scyA9IChkb2N1bWVudDogYW55KSA9PiB7XG4gICAgZG9jdW1lbnQub25rZXlkb3duID0gdGhpcy5jb250cm9scztcbiAgfTtcbn1cbiIsImltcG9ydCB7IEdhcmJhZ2VNYW4gfSBmcm9tICcuL0dhcmJhZ2VNYW4nO1xuaW1wb3J0IHsgUHggfSBmcm9tICcuLi91dGlsL1B4JztcblxuZXhwb3J0IGNsYXNzIEdhcmJhZ2VNYW5GYWN0b3J5IHtcbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoY29udGV4dDogYW55LCBnYW1lU2l6ZTogbnVtYmVyKTogR2FyYmFnZU1hbiB7XG4gICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVTaXplKTtcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZVNpemUpO1xuICAgIHJldHVybiBuZXcgR2FyYmFnZU1hbihQeC50b1NxKDEpLCBQeC50b1NxKHgpLCBQeC50b1NxKHkpLCBjb250ZXh0LCAncmVkJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJhc2VFbnRpdHkgfSBmcm9tICcuL0Jhc2VFbnRpdHknO1xuaW1wb3J0IHsgUHggfSBmcm9tICcuLi91dGlsL1B4JztcblxuZXhwb3J0IGNsYXNzIEdhcmJhZ2VNYW4gZXh0ZW5kcyBCYXNlRW50aXR5IHtcbiAgY3JlYXRlVmlzaW9uID0gKHJhZGl1czogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgY29uc3QgYmFzZVBvc2l0aW9uID0geyB4OiBQeC50b1B4KHBvc2l0aW9uWzBdKSAtIHJhZGl1cywgeTogUHgudG9QeChwb3NpdGlvblsxXSkgLSByYWRpdXMgfTtcbiAgICBjb25zdCBmdWxsUmFkaXVzID0gcmFkaXVzICogMiArIDE7XG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbXTtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBmdWxsUmFkaXVzOyByb3crKykge1xuICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgZnVsbFJhZGl1czsgY29sdW1uKyspIHtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goYCR7YmFzZVBvc2l0aW9uLnggKyBjb2x1bW59LCR7YmFzZVBvc2l0aW9uLnkgKyByb3d9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvc2l0aW9ucztcbiAgfTtcblxuICBtb3ZlID0gKGRpcmVjdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICB0aGlzLnggLT0gdGhpcy5zaXplO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgdGhpcy54ICs9IHRoaXMuc2l6ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0b3AnOlxuICAgICAgICB0aGlzLnkgLT0gdGhpcy5zaXplO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICB0aGlzLnkgKz0gdGhpcy5zaXplO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBUcmFzaCB9IGZyb20gJy4vVHJhc2gnO1xuaW1wb3J0IHsgUHggfSBmcm9tICcuLi91dGlsL1B4JztcblxuZXhwb3J0IGNsYXNzIFRyYXNoRmFjdG9yeSB7XG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlKGNvdW50OiBudW1iZXIsIGdhbWVTaXplOiBudW1iZXIsIGNvbnRleHQ6IGFueSwgZXhjZXB0Pzogc3RyaW5nW10pOiBUcmFzaFtdIHtcbiAgICBjb25zdCB0cmFzaDogVHJhc2hbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBUcmFzaEZhY3RvcnkuZ2VuZXJhdGVVbmlxdWUoZ2FtZVNpemUsIGV4Y2VwdCk7XG4gICAgICBleGNlcHQucHVzaChwb3NpdGlvbik7XG5cbiAgICAgIGNvbnN0IHggPSBwYXJzZUludChwb3NpdGlvbi5zcGxpdCgnLCcpWzBdKTtcbiAgICAgIGNvbnN0IHkgPSBwYXJzZUludChwb3NpdGlvbi5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIHRyYXNoLnB1c2gobmV3IFRyYXNoKFB4LnRvU3EoMSksIFB4LnRvU3EoeCksIFB4LnRvU3EoeSksIGNvbnRleHQsICdibHVlJykpO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFzaDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVVbmlxdWUgPSAoZ2FtZVNpemU6IG51bWJlciwgZXhjZXB0OiBzdHJpbmdbXSk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lU2l6ZSl9LCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZVNpemUpfWA7XG5cbiAgICBpZiAoZXhjZXB0LmZpbmQocG9zID0+IHBvcyA9PT0gcG9zaXRpb24pKSB7XG4gICAgICByZXR1cm4gVHJhc2hGYWN0b3J5LmdlbmVyYXRlVW5pcXVlKGdhbWVTaXplLCBleGNlcHQpO1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfTtcbn1cbiIsImltcG9ydCB7IEJhc2VFbnRpdHkgfSBmcm9tICcuL0Jhc2VFbnRpdHknO1xuaW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gJy4vRW50aXR5VHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBUcmFzaCBleHRlbmRzIEJhc2VFbnRpdHkge1xuICBnZXRUeXBlID0gKCk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIEVudGl0eVR5cGUuVFJBU0g7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuaW1wb3J0IHsgT2JzdGFjbGUgfSBmcm9tICcuL09ic3RhY2xlJztcbmltcG9ydCB7IEdlbmVyYXRlZEVudGl0eSB9IGZyb20gJy4vR2VuZXJhdGVkRW50aXRpZXMnO1xuXG5leHBvcnQgY2xhc3MgT2JzdGFjbGVGYWN0b3J5IHtcbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoY291bnQ6IG51bWJlciwgZ2FtZVNpemU6IG51bWJlciwgY29udGV4dDogYW55LCBleGNlcHQ/OiBzdHJpbmdbXSk6IEdlbmVyYXRlZEVudGl0eSB7XG4gICAgY29uc3Qgb2JzdGFjbGVzOiBPYnN0YWNsZVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IE9ic3RhY2xlRmFjdG9yeS5nZW5lcmF0ZVVuaXF1ZShnYW1lU2l6ZSwgZXhjZXB0KTtcbiAgICAgIGV4Y2VwdC5wdXNoKHBvc2l0aW9uKTtcblxuICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHBvc2l0aW9uLnNwbGl0KCcsJylbMF0pO1xuICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBvc2l0aW9uLnNwbGl0KCcsJylbMV0pO1xuICAgICAgb2JzdGFjbGVzLnB1c2gobmV3IE9ic3RhY2xlKFB4LnRvU3EoMSksIFB4LnRvU3EoeCksIFB4LnRvU3EoeSksIGNvbnRleHQsICdibGFjaycpKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBlbnRpdGllczogb2JzdGFjbGVzLCBleGNlcHQgfTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVVbmlxdWUgPSAoZ2FtZVNpemU6IG51bWJlciwgZXhjZXB0OiBzdHJpbmdbXSk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lU2l6ZSl9LCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZVNpemUpfWA7XG5cbiAgICBpZiAoZXhjZXB0LmZpbmQocG9zID0+IHBvcyA9PT0gcG9zaXRpb24pKSB7XG4gICAgICByZXR1cm4gT2JzdGFjbGVGYWN0b3J5LmdlbmVyYXRlVW5pcXVlKGdhbWVTaXplLCBleGNlcHQpO1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfTtcblxuICBwdWJsaWMgc3RhdGljIGdlbmVyYXRlRmVuY2UgPSAoZ2FtZVNpemU6IG51bWJlciwgY29udGV4dDogYW55KSA9PiB7XG4gICAgY29uc3Qgb2JzdGFjbGVzOiBPYnN0YWNsZVtdID0gW107XG4gICAgY29uc3QgZXhjZXB0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBnYW1lU2l6ZTsgeCsrKSB7XG4gICAgICBleGNlcHQucHVzaChgJHt4fSwkezB9YCk7XG4gICAgICBvYnN0YWNsZXMucHVzaChuZXcgT2JzdGFjbGUoUHgudG9TcSgxKSwgUHgudG9TcSh4KSwgUHgudG9TcSgwKSwgY29udGV4dCwgJ2JsYWNrJykpO1xuICAgICAgZXhjZXB0LnB1c2goYCR7eH0sJHtnYW1lU2l6ZSAtIDF9YCk7XG4gICAgICBvYnN0YWNsZXMucHVzaChuZXcgT2JzdGFjbGUoUHgudG9TcSgxKSwgUHgudG9TcSh4KSwgUHgudG9TcShnYW1lU2l6ZSAtIDEpLCBjb250ZXh0LCAnYmxhY2snKSk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBnYW1lU2l6ZTsgeSsrKSB7XG4gICAgICBleGNlcHQucHVzaChgJHswfSwke3l9YCk7XG4gICAgICBvYnN0YWNsZXMucHVzaChuZXcgT2JzdGFjbGUoUHgudG9TcSgxKSwgUHgudG9TcSgwKSwgUHgudG9TcSh5KSwgY29udGV4dCwgJ2JsYWNrJykpO1xuICAgICAgZXhjZXB0LnB1c2goYCR7Z2FtZVNpemUgLSAxfSwke3l9YCk7XG4gICAgICBvYnN0YWNsZXMucHVzaChuZXcgT2JzdGFjbGUoUHgudG9TcSgxKSwgUHgudG9TcShnYW1lU2l6ZSAtIDEpLCBQeC50b1NxKHkpLCBjb250ZXh0LCAnYmxhY2snKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZW50aXRpZXM6IG9ic3RhY2xlcywgZXhjZXB0IH07XG4gIH07XG59XG4iLCJpbXBvcnQgeyBCYXNlRW50aXR5IH0gZnJvbSAnLi9CYXNlRW50aXR5JztcbmltcG9ydCB7IEVudGl0eVR5cGUgfSBmcm9tICcuL0VudGl0eVR5cGUnO1xuXG5leHBvcnQgY2xhc3MgT2JzdGFjbGUgZXh0ZW5kcyBCYXNlRW50aXR5IHtcbiAgZ2V0VHlwZSA9ICgpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiBFbnRpdHlUeXBlLk9CU1RBQ0xFO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJy4vQmFzZUVudGl0eSc7XG5cbmludGVyZmFjZSBDb2xsaWRlIHtcbiAgZW50aXRpZXMxOiBCYXNlRW50aXR5W107XG4gIGVudGl0aWVzMjogQmFzZUVudGl0eVtdO1xuICBjYWxsYmFjazogQ2FsbGFibGVGdW5jdGlvbjtcbn1cblxuZXhwb3J0IGNsYXNzIENvbGxpZGVyIHtcbiAgcHJpdmF0ZSBtYXA6IENvbGxpZGVbXSA9IFtdO1xuXG4gIGFkZCA9IChlbnRpdGllczE6IEJhc2VFbnRpdHlbXSwgZW50aXRpZXMyOiBCYXNlRW50aXR5W10sIGNhbGxiYWNrOiBDYWxsYWJsZUZ1bmN0aW9uKSA9PiB7XG4gICAgdGhpcy5tYXAucHVzaCh7IGVudGl0aWVzMSwgZW50aXRpZXMyLCBjYWxsYmFjayB9KTtcbiAgfTtcblxuICBjaGVjayA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xsaWRlZXM6IGFueSA9IFtdO1xuICAgIHRoaXMubWFwLmZvckVhY2goKGNvbGxpZGUsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbGxpZGVlc1tpbmRleF0gPSBbXTtcblxuICAgICAgY29sbGlkZS5lbnRpdGllczEuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgY29sbGlkZWVzW2luZGV4XVtlbGVtZW50LmdldFN0cmluZ1Bvc2l0aXRvbigpXSA9IGVsZW1lbnQ7XG4gICAgICB9KTtcbiAgICAgIGNvbGxpZGUuZW50aXRpZXMyLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50LmdldFN0cmluZ1Bvc2l0aXRvbigpIGluIGNvbGxpZGVlc1tpbmRleF0pIHtcbiAgICAgICAgICBjb2xsaWRlLmNhbGxiYWNrKGNvbGxpZGVlc1tpbmRleF1bZWxlbWVudC5nZXRTdHJpbmdQb3NpdGl0b24oKV0sIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXNldCA9ICgpID0+IHtcbiAgICB0aGlzLm1hcCA9IFtdO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgVmlzaW9uIH0gZnJvbSAnLi9WaXNpb24nO1xuaW1wb3J0IHsgUHggfSBmcm9tICcuLi91dGlsL1B4JztcblxuZXhwb3J0IGNsYXNzIFZpc2lvbkZhY3Rvcnkge1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwb3NpdGlvbnM6IHN0cmluZ1tdLCBjb250ZXh0OiBhbnkpIHtcbiAgICBjb25zdCB2aXNpb25zOiBWaXNpb25bXSA9IFtdO1xuXG4gICAgcG9zaXRpb25zLmZvckVhY2gocG9zaXRpb24gPT4ge1xuICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHBvc2l0aW9uLnNwbGl0KCcsJylbMF0pO1xuICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBvc2l0aW9uLnNwbGl0KCcsJylbMV0pO1xuXG4gICAgICB2aXNpb25zLnB1c2gobmV3IFZpc2lvbihQeC50b1NxKDEpLCBQeC50b1NxKHgpLCBQeC50b1NxKHkpLCBjb250ZXh0LCAneWVsbG93JykpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHZpc2lvbnM7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJhc2VFbnRpdHkgfSBmcm9tICcuL0Jhc2VFbnRpdHknO1xuXG5leHBvcnQgY2xhc3MgVmlzaW9uIGV4dGVuZHMgQmFzZUVudGl0eSB7XG4gIG1vdmUgPSAoZGlyZWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIHRoaXMueCAtPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICB0aGlzLnggKz0gdGhpcy5zaXplO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgIHRoaXMueSAtPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgIHRoaXMueSArPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IEJhc2VFbnRpdHkgfSBmcm9tICcuL0Jhc2VFbnRpdHknO1xuaW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gJy4vRW50aXR5VHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZU1hcCB7XG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlU3RhdGVNYXAgPSAodmlzaW9uOiBzdHJpbmdbXSwgZW50aXRpZXM6IEJhc2VFbnRpdHlbXVtdKSA9PiB7XG4gICAgY29uc3Qgc3RhdGVNYXA6IGFueSA9IHt9O1xuICAgIGVudGl0aWVzLmZvckVhY2goZWxlbWVudCA9PiBlbGVtZW50LmZvckVhY2goZW50aXR5ID0+IChzdGF0ZU1hcFtlbnRpdHkuZ2V0U3RyaW5nUG9zaXRpdG9uSW5QeCgpXSA9IGVudGl0eSkpKTtcblxuICAgIGNvbnN0IHN0YXRlOiBhbnkgPSBbXTtcbiAgICB2aXNpb24uZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmIChlbGVtZW50IGluIHN0YXRlTWFwKSB7XG4gICAgICAgIHN0YXRlLnB1c2goc3RhdGVNYXBbZWxlbWVudF0uZ2V0VHlwZSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnB1c2goRW50aXR5VHlwZS5WT0lEKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBzdGF0ZS5qb2luKCcsJyk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBRdGFibGUgfSBmcm9tICcuL1F0YWJsZSc7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuL0FjdGlvbic7XG5pbXBvcnQgeyBGcmFtZUJ1ZmZlciB9IGZyb20gJy4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gJy4uL2dhbWUvRW50aXR5VHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBBZ2VudCB7XG4gIHB1YmxpYyBxdGFibGU6IFF0YWJsZTtcbiAgcHJpdmF0ZSBnYW1tYTogbnVtYmVyID0gMC44O1xuICBwcml2YXRlIGFscGhhOiBudW1iZXIgPSAwLjE7XG4gIHB1YmxpYyBmcmFtZUJ1ZmZlcjogRnJhbWVCdWZmZXI7XG5cbiAgcHJpdmF0ZSBuZXh0QWN0aW9uOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5xdGFibGUgPSBuZXcgUXRhYmxlKCk7XG4gICAgdGhpcy5mcmFtZUJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xuICB9XG5cbiAgc2V0TmV4dEFjdGlvbiA9IChzdGF0ZTogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5uZXh0QWN0aW9uID0gdGhpcy5nZXRBY3Rpb24oc3RhdGUpO1xuICAgIHRoaXMuZnJhbWVCdWZmZXIuYWRkKHN0YXRlLCB0aGlzLm5leHRBY3Rpb24pO1xuICB9O1xuXG4gIGdldEFjdGlvbiA9IChzdGF0ZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdGFrZVJhbmRvbURlY2lzaW9uID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApICUgOTAwMDE7XG4gICAgaWYgKHRha2VSYW5kb21EZWNpc2lvbiA9PSAwKSB7XG4gICAgICByZXR1cm4gQWN0aW9uLnJhbmRvbSgpO1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnF0YWJsZS50YWJsZSkubGVuZ3RoIDwgMzAwMDApIHtcbiAgICAgIHJldHVybiBBY3Rpb24ucmFuZG9tKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmV3YXJkczogYW55ID0ge1xuICAgICAgdXA6IHRoaXMucXRhYmxlLmdldFEoc3RhdGUsIEFjdGlvbi5VUCksXG4gICAgICBkb3duOiB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uRE9XTiksXG4gICAgICBsZWZ0OiB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uTEVGVCksXG4gICAgICByaWdodDogdGhpcy5xdGFibGUuZ2V0UShzdGF0ZSwgQWN0aW9uLlJJR0hUKVxuICAgIH07XG5cbiAgICBjb25zb2xlLnRhYmxlKHJld2FyZHMpO1xuICAgIGNvbnN0IGhpZ2hlc3RSZXdhcmQgPSBPYmplY3Qua2V5cyhyZXdhcmRzKS5yZWR1Y2UoKGEsIGIpID0+IChyZXdhcmRzW2FdID4gcmV3YXJkc1tiXSA/IGEgOiBiKSk7XG5cbiAgICBzd2l0Y2ggKGhpZ2hlc3RSZXdhcmQpIHtcbiAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgcmV0dXJuIEFjdGlvbi5VUDtcbiAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICByZXR1cm4gQWN0aW9uLkRPV047XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgcmV0dXJuIEFjdGlvbi5MRUZUO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICByZXR1cm4gQWN0aW9uLlJJR0hUO1xuICAgIH1cbiAgfTtcblxuICBleGVjdXRlQWN0aW9uID0gKGRvY3VtZW50OiBhbnkpID0+IHtcbiAgICBzd2l0Y2ggKHRoaXMubmV4dEFjdGlvbikge1xuICAgICAgY2FzZSBBY3Rpb24uVVA6XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgS2V5Ym9hcmRFdmVudCgna2V5ZG93bicsIHsga2V5Q29kZTogJzM4JyB9KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBBY3Rpb24uRE9XTjpcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgeyBrZXlDb2RlOiAnNDAnIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFjdGlvbi5MRUZUOlxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleWRvd24nLCB7IGtleUNvZGU6ICczNycgfSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQWN0aW9uLlJJR0hUOlxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleWRvd24nLCB7IGtleUNvZGU6ICczOScgfSkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgcmV3YXJkID0gKCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmZyYW1lQnVmZmVyLmJ1ZmZlci5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgY29uc3QgbWlkZGxlSW5kZXggPSAodGhpcy5mcmFtZUJ1ZmZlci5idWZmZXIubGVuZ3RoIC0gMSkgLyAyO1xuXG4gICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuZnJhbWVCdWZmZXIuYnVmZmVyW2ldLnN0YXRlO1xuICAgICAgY29uc3QgYXJyYXlTdGF0ZSA9IHN0YXRlLnNwbGl0KCcsJyk7XG5cbiAgICAgIGxldCByZXdhcmQ6IG51bWJlcjtcbiAgICAgIGlmICh0aGlzLmZyYW1lQnVmZmVyLmJ1ZmZlcltpIC0gMV0pIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNGcmFtZSA9IHRoaXMuZnJhbWVCdWZmZXIuYnVmZmVyW2kgLSAxXTtcbiAgICAgICAgaWYgKHBhcnNlSW50KGFycmF5U3RhdGVbbWlkZGxlSW5kZXhdKSA9PT0gRW50aXR5VHlwZS5PQlNUQUNMRSkge1xuICAgICAgICAgIHJld2FyZCA9IC01O1xuICAgICAgICAgIC8vdGhpcy5xdGFibGUuc2V0UShwcmV2aW91c0ZyYW1lLnN0YXRlLCBwcmV2aW91c0ZyYW1lLmFjdGlvbiwgLTUpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGFycmF5U3RhdGVbbWlkZGxlSW5kZXhdKSA9PT0gRW50aXR5VHlwZS5UUkFTSCkge1xuICAgICAgICAgIHJld2FyZCA9IDU7XG4gICAgICAgICAgLy90aGlzLnF0YWJsZS5zZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uLCA1KTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChhcnJheVN0YXRlW21pZGRsZUluZGV4XSkgPT09IEVudGl0eVR5cGUuVk9JRCkge1xuICAgICAgICAgIHJld2FyZCA9IDE7XG4gICAgICAgICAgLy90aGlzLnF0YWJsZS5zZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXdhcmQpIHtcbiAgICAgICAgICBjb25zdCBvcHRpbWFsRnV0dXJlVmFsdWUgPSBNYXRoLm1heChcbiAgICAgICAgICAgIHRoaXMucXRhYmxlLmdldFEoc3RhdGUsIEFjdGlvbi5VUCksXG4gICAgICAgICAgICB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uRE9XTiksXG4gICAgICAgICAgICB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uTEVGVCksXG4gICAgICAgICAgICB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uUklHSFQpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNvbnN0IHVwZGF0ZVZhbHVlID1cbiAgICAgICAgICAgIHRoaXMuYWxwaGEgKlxuICAgICAgICAgICAgKHJld2FyZCArIHRoaXMuZ2FtbWEgKiBvcHRpbWFsRnV0dXJlVmFsdWUgLSB0aGlzLnF0YWJsZS5nZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uKSk7XG5cbiAgICAgICAgICB0aGlzLnF0YWJsZS5zZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uLCB1cGRhdGVWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmZyYW1lQnVmZmVyLmNsZWFyKCk7XG4gIH07XG59XG4iLCJleHBvcnQgY2xhc3MgUXRhYmxlIHtcbiAgcHVibGljIHRhYmxlOiBhbnkgPSB7fTtcblxuICBnZXRRID0gKHN0YXRlOiBzdHJpbmcsIGFjdGlvbjogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBgJHtzdGF0ZX0sJHthY3Rpb259YDtcbiAgICBpZiAoIShjb25maWcgaW4gdGhpcy50YWJsZSkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRhYmxlW2NvbmZpZ107XG4gIH07XG5cbiAgc2V0USA9IChzdGF0ZTogc3RyaW5nLCBhY3Rpb246IG51bWJlciwgcmV3YXJkOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBgJHtzdGF0ZX0sJHthY3Rpb259YDtcbiAgICBpZiAoIShjb25maWcgaW4gdGhpcy50YWJsZSkpIHtcbiAgICAgIHRoaXMudGFibGVbY29uZmlnXSA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy50YWJsZVtjb25maWddICs9IHJld2FyZDtcbiAgfTtcblxuICBydWxlQ291bnQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudGFibGUpLmxlbmd0aDtcbiAgfTtcbn1cbiIsImV4cG9ydCBjbGFzcyBBY3Rpb24ge1xuICBzdGF0aWMgVVAgPSAxO1xuICBzdGF0aWMgRE9XTiA9IDI7XG4gIHN0YXRpYyBMRUZUID0gMztcbiAgc3RhdGljIFJJR0hUID0gNDtcblxuICBwdWJsaWMgc3RhdGljIHRvQXJyYXkgPSAoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoQWN0aW9uKTtcbiAgfTtcblxuICBwdWJsaWMgc3RhdGljIHJhbmRvbSA9ICgpID0+IHtcbiAgICBjb25zdCBhcnJheSA9IFsxLCAyLCAzLCA0XTtcbiAgICByZXR1cm4gYXJyYXlbKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpIHwgMF07XG4gIH07XG59XG4iLCJpbnRlcmZhY2UgQnVmZmVyIHtcbiAgc3RhdGU6IHN0cmluZztcbiAgYWN0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRnJhbWVCdWZmZXIge1xuICBwdWJsaWMgYnVmZmVyOiBCdWZmZXJbXSA9IFtdO1xuXG4gIGFkZCA9IChzdGF0ZTogc3RyaW5nLCBhY3Rpb246IG51bWJlcikgPT4ge1xuICAgIHRoaXMuYnVmZmVyLnB1c2goeyBzdGF0ZSwgYWN0aW9uIH0pO1xuICB9O1xuXG4gIGNsZWFyID0gKCkgPT4ge1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gIH07XG59XG4iXSwic291cmNlUm9vdCI6IiJ9