!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.toSq=function(e){return e*t.pxInSquare},t.toPx=function(e){return e/t.pxInSquare},t.pxInSquare=10,t}();e.Px=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t,e,n,r,i){var a=this;this.getColor=function(){return a.color},this.setColor=function(t){a.color=t},this.getX=function(){return a.x},this.setX=function(t){a.x=t},this.getY=function(){return a.y},this.setY=function(t){a.y=t},this.getPosition=function(){return[a.x,a.y]},this.setPosition=function(t){a.x=t[0],a.y=t[1]},this.getContext=function(){return a.context},this.setContext=function(t){a.context=t},this.getSize=function(){return a.size},this.setSize=function(t){a.size=t},this.getStringPosititonInPx=function(){var t=a.getPosition();return o.Px.toPx(t[0])+","+o.Px.toPx(t[1])},this.getStringPosititon=function(){return a.getPosition().join(",")},this.update=function(){a.getContext().fillStyle=a.color,a.getContext().fillRect(a.x,a.y,a.size,a.size)},this.x=e,this.y=n,this.size=t,this.context=r,this.color=i};e.BaseEntity=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.VOID=0]="VOID",t[t.OBSTACLE=1]="OBSTACLE",t[t.TRASH=2]="TRASH"}(e.EntityType||(e.EntityType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(4),i=n(15),a=n(18),c=new r.Game(document.getElementById("canvas"),50),u=new i.Agent,s=new a.FrameBuffer;c.start(),c.updateCallback=function(t){o=u.getAction(t),s.add(t,o)},c.endGameCallback=function(){u.reward(s),s.clear(),console.log({rules:Object.keys(u.qtable.table).length})};setInterval((function(){u.executeAction(o,document)}),1);document.onkeydown=function(t){"38"==(t=t||window.event).keyCode?c.move("top"):"40"==t.keyCode?c.move("down"):"37"==t.keyCode?c.move("left"):"39"==t.keyCode?c.move("right"):"w"==t.key&&c.start()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(0),i=n(7),a=n(9),c=n(11),u=n(12),s=n(14),f=function(t,e){var n=this;this.start=function(){n.clear(),n.reset(),n.garbageMan=o.GarbageManFactory.create(n.context,n.gameSize);var t=a.ObstacleFactory.generateFence(n.gameSize,n.context),e=a.ObstacleFactory.create(400,n.gameSize,n.context,[n.garbageMan.getStringPosititonInPx()].concat(t.except));n.obstacles=e.entities.concat(t.entities),n.trash=i.TrashFactory.create(50,n.gameSize,n.context,e.except),n.collider.add([n.garbageMan],n.obstacles,(function(t,e){n.endGameCallback&&n.endGameCallback(),n.start()})),n.collider.add([n.garbageMan],n.trash,(function(t,e){e.setPosition([-5e3,-5e3]),n.update()})),n.visions=u.VisionFactory.create(n.garbageMan.createVision(2),n.context),n.update()},this.update=function(){n.clear(),n.visions.forEach((function(t){t.update()})),n.garbageMan.update(),n.trash.forEach((function(t){t.update()})),n.obstacles.forEach((function(t){t.update()})),n.updateCallback&&n.updateCallback(s.StateMap.createStateMap(n.garbageMan.createVision(2),[n.obstacles,n.trash])),n.collider.check()},this.clear=function(){n.context.clearRect(0,0,n.canvas.width,n.canvas.height)},this.reset=function(){n.collider.reset()},this.move=function(t){n.garbageMan.move(t),n.visions.forEach((function(e){e.move(t)})),n.update()},this.gameSize=e,this.canvas=t,this.canvas.width=r.Px.toSq(e),this.canvas.height=r.Px.toSq(e),this.context=t.getContext("2d"),this.collider=new c.Collider};e.Game=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),r=n(0),i=function(){function t(){}return t.create=function(t,e){var n=Math.floor(Math.random()*e),i=Math.floor(Math.random()*e);return new o.GarbageMan(r.Px.toSq(1),r.Px.toSq(n),r.Px.toSq(i),t,"red")},t}();e.GarbageManFactory=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(0),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createVision=function(t){for(var n=e.getPosition(),o=a.Px.toPx(n[0])-t,r=a.Px.toPx(n[1])-t,i=2*t+1,c=[],u=0;u<i;u++)for(var s=0;s<i;s++)c.push(o+s+","+(r+u));return c},e.move=function(t){switch(t){case"left":e.x-=e.size;break;case"right":e.x+=e.size;break;case"top":e.y-=e.size;break;case"down":e.y+=e.size}},e}return r(e,t),e}(i.BaseEntity);e.GarbageMan=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=n(0),i=function(){function t(){}return t.create=function(e,n,i,a){for(var c=[],u=0;u<e;u++){var s=t.generateUnique(n,a);a.push(s);var f=parseInt(s.split(",")[0]),l=parseInt(s.split(",")[1]);c.push(new o.Trash(r.Px.toSq(1),r.Px.toSq(f),r.Px.toSq(l),i,"blue"))}return c},t.generateUnique=function(e,n){var o=Math.floor(Math.random()*e)+","+Math.floor(Math.random()*e);return n.find((function(t){return t===o}))?t.generateUnique(e,n):o},t}();e.TrashFactory=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(2),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getType=function(){return a.EntityType.TRASH},e}return r(e,t),e}(i.BaseEntity);e.Trash=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(10),i=function(){function t(){}return t.create=function(e,n,i,a){for(var c=[],u=0;u<e;u++){var s=t.generateUnique(n,a);a.push(s);var f=parseInt(s.split(",")[0]),l=parseInt(s.split(",")[1]);c.push(new r.Obstacle(o.Px.toSq(1),o.Px.toSq(f),o.Px.toSq(l),i,"black"))}return{entities:c,except:a}},t.generateUnique=function(e,n){var o=Math.floor(Math.random()*e)+","+Math.floor(Math.random()*e);return n.find((function(t){return t===o}))?t.generateUnique(e,n):o},t.generateFence=function(t,e){for(var n=[],i=[],a=0;a<t;a++)i.push(a+",0"),n.push(new r.Obstacle(o.Px.toSq(1),o.Px.toSq(a),o.Px.toSq(0),e,"black")),i.push(a+","+(t-1)),n.push(new r.Obstacle(o.Px.toSq(1),o.Px.toSq(a),o.Px.toSq(t-1),e,"black"));for(var c=0;c<t;c++)i.push("0,"+c),n.push(new r.Obstacle(o.Px.toSq(1),o.Px.toSq(0),o.Px.toSq(c),e,"black")),i.push(t-1+","+c),n.push(new r.Obstacle(o.Px.toSq(1),o.Px.toSq(t-1),o.Px.toSq(c),e,"black"));return{entities:n,except:i}},t}();e.ObstacleFactory=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(2),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getType=function(){return a.EntityType.OBSTACLE},e}return r(e,t),e}(i.BaseEntity);e.Obstacle=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this;this.map=[],this.add=function(e,n,o){t.map.push({entities1:e,entities2:n,callback:o})},this.check=function(){var e=[];t.map.forEach((function(t,n){e[n]=[],t.entities1.forEach((function(t){e[n][t.getStringPosititon()]=t})),t.entities2.forEach((function(o){o.getStringPosititon()in e[n]&&t.callback(e[n][o.getStringPosititon()],o)}))}))},this.reset=function(){t.map=[]}};e.Collider=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),r=n(0),i=function(){function t(){}return t.create=function(t,e){var n=[];return t.forEach((function(t){var i=parseInt(t.split(",")[0]),a=parseInt(t.split(",")[1]);n.push(new o.Vision(r.Px.toSq(1),r.Px.toSq(i),r.Px.toSq(a),e,"yellow"))})),n},t}();e.VisionFactory=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.move=function(t){switch(t){case"left":e.x-=e.size;break;case"right":e.x+=e.size;break;case"top":e.y-=e.size;break;case"down":e.y+=e.size}},e}return r(e,t),e}(n(1).BaseEntity);e.Vision=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=function(){function t(){}return t.createStateMap=function(t,e){var n={};e.forEach((function(t){return t.forEach((function(t){return n[t.getStringPosititonInPx()]=t}))}));var r=[];return t.forEach((function(t){t in n?r.push(n[t].getType()):r.push(o.EntityType.VOID)})),r.join(",")},t}();e.StateMap=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),r=n(17),i=n(2),a=function(){var t=this;this.gamma=.8,this.alpha=.1,this.getAction=function(e){if(0==Math.ceil(1e5*Math.random())%90001)return r.Action.random();if(Object.keys(t.qtable.table).length<3e4)return r.Action.random();var n={up:t.qtable.getQ(e,r.Action.UP),down:t.qtable.getQ(e,r.Action.DOWN),left:t.qtable.getQ(e,r.Action.LEFT),right:t.qtable.getQ(e,r.Action.RIGHT)};switch(console.table(n),Object.keys(n).reduce((function(t,e){return n[t]>n[e]?t:e}))){case"up":return r.Action.UP;case"down":return r.Action.DOWN;case"left":return r.Action.LEFT;case"right":return r.Action.RIGHT}},this.executeAction=function(t,e){switch(t){case r.Action.UP:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"38"}));break;case r.Action.DOWN:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"40"}));break;case r.Action.LEFT:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"37"}));break;case r.Action.RIGHT:e.dispatchEvent(new KeyboardEvent("keydown",{keyCode:"39"}))}},this.reward=function(e){for(var n=e.buffer.length-1;n>=0;--n){var o=(e.buffer.length-1)/2,a=e.buffer[n].state,c=a.split(","),u=void 0;if(e.buffer[n-1]){var s=e.buffer[n-1];if(parseInt(c[o])===i.EntityType.OBSTACLE?u=-5:parseInt(c[o])===i.EntityType.TRASH?u=5:parseInt(c[o])===i.EntityType.VOID&&(u=1),u){var f=Math.max(t.qtable.getQ(a,r.Action.UP),t.qtable.getQ(a,r.Action.DOWN),t.qtable.getQ(a,r.Action.LEFT),t.qtable.getQ(a,r.Action.RIGHT)),l=t.alpha*(u+t.gamma*f-t.qtable.getQ(s.state,s.action));t.qtable.setQ(s.state,s.action,l)}}}},this.qtable=new o.Qtable};e.Agent=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this;this.table={},this.getQ=function(e,n){var o=e+","+n;return o in t.table?t.table[o]:0},this.setQ=function(e,n,o){var r=e+","+n;r in t.table||(t.table[r]=0),t.table[r]+=o}};e.Qtable=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.UP=1,t.DOWN=2,t.LEFT=3,t.RIGHT=4,t.toArray=function(){return Object.values(t)},t.random=function(){var t=[1,2,3,4];return t[Math.random()*t.length|0]},t}();e.Action=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this;this.buffer=[],this.add=function(e,n){t.buffer.push({state:e,action:n})},this.clear=function(){t.buffer=[]}};e.FrameBuffer=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvUHgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvQmFzZUVudGl0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9FbnRpdHlUeXBlLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvR2FtZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9HYXJiYWdlTWFuRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9HYXJiYWdlTWFuLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL1RyYXNoRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9UcmFzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9PYnN0YWNsZUZhY3RvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvT2JzdGFjbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvQ29sbGlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvVmlzaW9uRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9WaXNpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvU3RhdGVNYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3FsZWFybmluZy9BZ2VudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcWxlYXJuaW5nL1F0YWJsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcWxlYXJuaW5nL0FjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcWxlYXJuaW5nL0ZyYW1lQnVmZmVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidG9TcSIsInBpeGVscyIsIlB4IiwicHhJblNxdWFyZSIsInRvUHgiLCJzcXVhcmUiLCJzaXplIiwieCIsInkiLCJjb250ZXh0IiwiY29sb3IiLCJnZXRDb2xvciIsInNldENvbG9yIiwiZ2V0WCIsInNldFgiLCJnZXRZIiwic2V0WSIsImdldFBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJwb3NpdGlvbiIsImdldENvbnRleHQiLCJzZXRDb250ZXh0IiwiZ2V0U2l6ZSIsInNldFNpemUiLCJnZXRTdHJpbmdQb3NpdGl0b25JblB4IiwicG9zIiwiZ2V0U3RyaW5nUG9zaXRpdG9uIiwiam9pbiIsInVwZGF0ZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwidGhpcyIsIkJhc2VFbnRpdHkiLCJFbnRpdHlUeXBlIiwiYWN0aW9uIiwiZ2FtZSIsIkdhbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWdlbnQiLCJBZ2VudCIsImZyYW1lQnVmZmVyIiwiRnJhbWVCdWZmZXIiLCJzdGFydCIsInVwZGF0ZUNhbGxiYWNrIiwic3RhdGUiLCJnZXRBY3Rpb24iLCJhZGQiLCJlbmRHYW1lQ2FsbGJhY2siLCJyZXdhcmQiLCJjbGVhciIsImNvbnNvbGUiLCJsb2ciLCJydWxlcyIsImtleXMiLCJxdGFibGUiLCJ0YWJsZSIsImxlbmd0aCIsInNldEludGVydmFsIiwiZXhlY3V0ZUFjdGlvbiIsIm9ua2V5ZG93biIsImUiLCJ3aW5kb3ciLCJldmVudCIsImtleUNvZGUiLCJtb3ZlIiwiY2FudmFzIiwiZ2FtZVNpemUiLCJyZXNldCIsImdhcmJhZ2VNYW4iLCJHYXJiYWdlTWFuRmFjdG9yeSIsImZlbmNlIiwiT2JzdGFjbGVGYWN0b3J5IiwiZ2VuZXJhdGVGZW5jZSIsIm9ic3RhY2xlcyIsImNvbmNhdCIsImV4Y2VwdCIsImVudGl0aWVzIiwidHJhc2giLCJUcmFzaEZhY3RvcnkiLCJjb2xsaWRlciIsIm9iamVjdDEiLCJvYmplY3QyIiwidmlzaW9ucyIsIlZpc2lvbkZhY3RvcnkiLCJjcmVhdGVWaXNpb24iLCJmb3JFYWNoIiwiZWxlbWVudCIsIlN0YXRlTWFwIiwiY3JlYXRlU3RhdGVNYXAiLCJjaGVjayIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZGlyZWN0aW9uIiwiQ29sbGlkZXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJHYXJiYWdlTWFuIiwicmFkaXVzIiwiYmFzZVBvc2l0aW9uIiwiZnVsbFJhZGl1cyIsInBvc2l0aW9ucyIsInJvdyIsImNvbHVtbiIsInB1c2giLCJjb3VudCIsImdlbmVyYXRlVW5pcXVlIiwicGFyc2VJbnQiLCJzcGxpdCIsIlRyYXNoIiwiZmluZCIsImdldFR5cGUiLCJUUkFTSCIsIk9ic3RhY2xlIiwiT0JTVEFDTEUiLCJtYXAiLCJlbnRpdGllczEiLCJlbnRpdGllczIiLCJjYWxsYmFjayIsImNvbGxpZGVlcyIsImNvbGxpZGUiLCJpbmRleCIsIlZpc2lvbiIsInZpc2lvbiIsInN0YXRlTWFwIiwiZW50aXR5IiwiVk9JRCIsImdhbW1hIiwiYWxwaGEiLCJjZWlsIiwiQWN0aW9uIiwicmV3YXJkcyIsInVwIiwiZ2V0USIsIlVQIiwiZG93biIsIkRPV04iLCJsZWZ0IiwiTEVGVCIsInJpZ2h0IiwiUklHSFQiLCJyZWR1Y2UiLCJhIiwiYiIsImRpc3BhdGNoRXZlbnQiLCJLZXlib2FyZEV2ZW50IiwiYnVmZmVyIiwibWlkZGxlSW5kZXgiLCJhcnJheVN0YXRlIiwicHJldmlvdXNGcmFtZSIsIm9wdGltYWxGdXR1cmVWYWx1ZSIsIm1heCIsInVwZGF0ZVZhbHVlIiwic2V0USIsIlF0YWJsZSIsImNvbmZpZyIsInRvQXJyYXki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WWhILEVBQUssSUFBSVgsRUFDM0IsT0FBTTJILEtBQVUsRUFBS3JHLE1BSWQsRUFBS0EsTUFBTXFHLEdBSFQsR0FNWCxLQUFBRixLQUFPLFNBQUM5RyxFQUFlWCxFQUFnQmUsR0FDckMsSUFBTTRHLEVBQVloSCxFQUFLLElBQUlYLEVBQ3JCMkgsS0FBVSxFQUFLckcsUUFDbkIsRUFBS0EsTUFBTXFHLEdBQVUsR0FHdkIsRUFBS3JHLE1BQU1xRyxJQUFXNUcsSUFsQmIsRUFBQTJHLFUsOEVDQWIsK0JBY0EsT0FiUyxFQUFBcEIsR0FBSyxFQUNMLEVBQUFFLEtBQU8sRUFDUCxFQUFBRSxLQUFPLEVBQ1AsRUFBQUUsTUFBUSxFQUVELEVBQUFnQixRQUFVLFdBQ3RCLE9BQU9wTCxPQUFPcUwsT0FBTzNCLElBR1QsRUFBQWxDLE9BQVMsV0FDckIsSUFBTThELEVBQVEsQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN4QixPQUFPQSxFQUFPaEUsS0FBS0UsU0FBVzhELEVBQU12RyxPQUFVLElBRWxELEVBZEEsR0FBYSxFQUFBMkUsVSw4RUNLYiw0QkFDUyxLQUFBZ0IsT0FBbUIsR0FFMUIsS0FBQXJHLElBQU0sU0FBQ0YsRUFBZVgsR0FDcEIsRUFBS2tILE9BQU8xQyxLQUFLLENBQUU3RCxNQUFLLEVBQUVYLE9BQU0sS0FHbEMsS0FBQWdCLE1BQVEsV0FDTixFQUFLa0csT0FBUyxLQVJMLEVBQUExRyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJleHBvcnQgY2xhc3MgUHgge1xuICBwdWJsaWMgc3RhdGljIHB4SW5TcXVhcmU6IG51bWJlciA9IDEwO1xuXG4gIHB1YmxpYyBzdGF0aWMgdG9TcShwaXhlbHM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHBpeGVscyAqIFB4LnB4SW5TcXVhcmU7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHRvUHgoc3F1YXJlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBzcXVhcmUgLyBQeC5weEluU3F1YXJlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuXG5leHBvcnQgY2xhc3MgQmFzZUVudGl0eSB7XG4gIHByb3RlY3RlZCB4OiBudW1iZXI7XG4gIHByb3RlY3RlZCB5OiBudW1iZXI7XG4gIHByb3RlY3RlZCBjb250ZXh0OiBhbnk7XG4gIHByb3RlY3RlZCBzaXplOiBudW1iZXI7XG4gIHByb3RlY3RlZCBjb2xvcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHNpemU6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvbnRleHQ6IGFueSwgY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICB9XG5cbiAgZ2V0Q29sb3IgPSAoKTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgfTtcblxuICBzZXRDb2xvciA9IChjb2xvcjogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICB9O1xuXG4gIGdldFggPSAoKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gdGhpcy54O1xuICB9O1xuXG4gIHNldFggPSAoeDogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy54ID0geDtcbiAgfTtcblxuICBnZXRZID0gKCk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIHRoaXMueTtcbiAgfTtcblxuICBzZXRZID0gKHk6IG51bWJlcikgPT4ge1xuICAgIHRoaXMueSA9IHk7XG4gIH07XG5cbiAgZ2V0UG9zaXRpb24gPSAoKTogbnVtYmVyW10gPT4ge1xuICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xuICB9O1xuXG4gIHNldFBvc2l0aW9uID0gKHBvc2l0aW9uOiBudW1iZXJbXSkgPT4ge1xuICAgIHRoaXMueCA9IHBvc2l0aW9uWzBdO1xuICAgIHRoaXMueSA9IHBvc2l0aW9uWzFdO1xuICB9O1xuXG4gIGdldENvbnRleHQgPSAoKTogYW55ID0+IHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICB9O1xuXG4gIHNldENvbnRleHQgPSAoY29udGV4dDogYW55KSA9PiB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgfTtcblxuICBnZXRTaXplID0gKCk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZTtcbiAgfTtcblxuICBzZXRTaXplID0gKHNpemU6IG51bWJlcikgPT4ge1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gIH07XG5cbiAgZ2V0U3RyaW5nUG9zaXRpdG9uSW5QeCA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICByZXR1cm4gYCR7UHgudG9QeChwb3NbMF0pfSwke1B4LnRvUHgocG9zWzFdKX1gO1xuICB9O1xuXG4gIGdldFN0cmluZ1Bvc2l0aXRvbiA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uKCkuam9pbignLCcpO1xuICB9O1xuXG4gIHVwZGF0ZSA9ICgpID0+IHtcbiAgICB0aGlzLmdldENvbnRleHQoKS5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xuICAgIHRoaXMuZ2V0Q29udGV4dCgpLmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLnNpemUsIHRoaXMuc2l6ZSk7XG4gIH07XG59XG4iLCJleHBvcnQgZW51bSBFbnRpdHlUeXBlIHtcbiAgVk9JRCA9IDAsXG4gIE9CU1RBQ0xFID0gMSxcbiAgVFJBU0ggPSAyXG59XG4iLCJpbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9nYW1lL0dhbWUnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tICcuL3FsZWFybmluZy9BZ2VudCc7XG5pbXBvcnQgeyBGcmFtZUJ1ZmZlciB9IGZyb20gJy4vcWxlYXJuaW5nL0ZyYW1lQnVmZmVyJztcblxuY29uc3QgZ2FtZSA9IG5ldyBHYW1lKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKSwgNTApO1xuY29uc3QgYWdlbnQgPSBuZXcgQWdlbnQoKTtcbmNvbnN0IGZyYW1lQnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKCk7XG5cbmdhbWUuc3RhcnQoKTtcbmxldCBhY3Rpb246IG51bWJlcjtcblxuZ2FtZS51cGRhdGVDYWxsYmFjayA9IChzdGF0ZTogc3RyaW5nKSA9PiB7XG4gIGFjdGlvbiA9IGFnZW50LmdldEFjdGlvbihzdGF0ZSk7XG4gIGZyYW1lQnVmZmVyLmFkZChzdGF0ZSwgYWN0aW9uKTtcbn07XG5cbmdhbWUuZW5kR2FtZUNhbGxiYWNrID0gKCkgPT4ge1xuICBhZ2VudC5yZXdhcmQoZnJhbWVCdWZmZXIpO1xuICBmcmFtZUJ1ZmZlci5jbGVhcigpO1xuICBjb25zb2xlLmxvZyh7IHJ1bGVzOiBPYmplY3Qua2V5cyhhZ2VudC5xdGFibGUudGFibGUpLmxlbmd0aCB9KTtcbn07XG5cbmNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBhZ2VudC5leGVjdXRlQWN0aW9uKGFjdGlvbiwgZG9jdW1lbnQpO1xufSwgMSk7XG5cbmRvY3VtZW50Lm9ua2V5ZG93biA9IGNoZWNrS2V5O1xuXG5mdW5jdGlvbiBjaGVja0tleShlOiBhbnkpIHtcbiAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuXG4gIGlmIChlLmtleUNvZGUgPT0gJzM4Jykge1xuICAgIC8vIHVwIGFycm93XG4gICAgZ2FtZS5tb3ZlKCd0b3AnKTtcbiAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gJzQwJykge1xuICAgIC8vIGRvd24gYXJyb3dcbiAgICBnYW1lLm1vdmUoJ2Rvd24nKTtcbiAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gJzM3Jykge1xuICAgIC8vIGxlZnQgYXJyb3dcbiAgICBnYW1lLm1vdmUoJ2xlZnQnKTtcbiAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gJzM5Jykge1xuICAgIC8vIHJpZ2h0IGFycm93XG4gICAgZ2FtZS5tb3ZlKCdyaWdodCcpO1xuICB9IGVsc2UgaWYgKGUua2V5ID09ICd3Jykge1xuICAgIC8vIHJpZ2h0IGFycm93XG4gICAgZ2FtZS5zdGFydCgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBUcmFzaCB9IGZyb20gJy4vVHJhc2gnO1xuaW1wb3J0IHsgR2FyYmFnZU1hbiB9IGZyb20gJy4vR2FyYmFnZU1hbic7XG5pbXBvcnQgeyBHYXJiYWdlTWFuRmFjdG9yeSB9IGZyb20gJy4vR2FyYmFnZU1hbkZhY3RvcnknO1xuaW1wb3J0IHsgUHggfSBmcm9tICcuLi91dGlsL1B4JztcbmltcG9ydCB7IFRyYXNoRmFjdG9yeSB9IGZyb20gJy4vVHJhc2hGYWN0b3J5JztcbmltcG9ydCB7IE9ic3RhY2xlRmFjdG9yeSB9IGZyb20gJy4vT2JzdGFjbGVGYWN0b3J5JztcbmltcG9ydCB7IE9ic3RhY2xlIH0gZnJvbSAnLi9PYnN0YWNsZSc7XG5pbXBvcnQgeyBDb2xsaWRlciB9IGZyb20gJy4vQ29sbGlkZXInO1xuaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJy4vQmFzZUVudGl0eSc7XG5pbXBvcnQgeyBWaXNpb25GYWN0b3J5IH0gZnJvbSAnLi9WaXNpb25GYWN0b3J5JztcbmltcG9ydCB7IFZpc2lvbiB9IGZyb20gJy4vVmlzaW9uJztcbmltcG9ydCB7IFN0YXRlTWFwIH0gZnJvbSAnLi9TdGF0ZU1hcCc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgY29udGV4dDogYW55O1xuICBjYW52YXM6IGFueTtcbiAgdHJhc2g6IFRyYXNoW107XG4gIGdhcmJhZ2VNYW46IEdhcmJhZ2VNYW47XG4gIGdhbWVTaXplOiBudW1iZXI7XG4gIG9ic3RhY2xlczogT2JzdGFjbGVbXTtcbiAgY29sbGlkZXI6IENvbGxpZGVyO1xuICB2aXNpb25zOiBWaXNpb25bXTtcbiAgdXBkYXRlQ2FsbGJhY2s/OiBDYWxsYWJsZUZ1bmN0aW9uO1xuICBlbmRHYW1lQ2FsbGJhY2s/OiBDYWxsYWJsZUZ1bmN0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKGNhbnZhczogYW55LCBnYW1lU2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5nYW1lU2l6ZSA9IGdhbWVTaXplO1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuY2FudmFzLndpZHRoID0gUHgudG9TcShnYW1lU2l6ZSk7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gUHgudG9TcShnYW1lU2l6ZSk7XG4gICAgdGhpcy5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBDb2xsaWRlcigpO1xuICB9XG5cbiAgc3RhcnQgPSAoKSA9PiB7XG4gICAgdGhpcy5jbGVhcigpO1xuICAgIHRoaXMucmVzZXQoKTtcblxuICAgIHRoaXMuZ2FyYmFnZU1hbiA9IEdhcmJhZ2VNYW5GYWN0b3J5LmNyZWF0ZSh0aGlzLmNvbnRleHQsIHRoaXMuZ2FtZVNpemUpO1xuXG4gICAgY29uc3QgZmVuY2UgPSBPYnN0YWNsZUZhY3RvcnkuZ2VuZXJhdGVGZW5jZSh0aGlzLmdhbWVTaXplLCB0aGlzLmNvbnRleHQpO1xuXG4gICAgY29uc3Qgb2JzdGFjbGVzID0gT2JzdGFjbGVGYWN0b3J5LmNyZWF0ZShcbiAgICAgIDQwMCxcbiAgICAgIHRoaXMuZ2FtZVNpemUsXG4gICAgICB0aGlzLmNvbnRleHQsXG4gICAgICBbdGhpcy5nYXJiYWdlTWFuLmdldFN0cmluZ1Bvc2l0aXRvbkluUHgoKV0uY29uY2F0KGZlbmNlLmV4Y2VwdClcbiAgICApO1xuXG4gICAgdGhpcy5vYnN0YWNsZXMgPSBvYnN0YWNsZXMuZW50aXRpZXMuY29uY2F0KGZlbmNlLmVudGl0aWVzKTtcblxuICAgIHRoaXMudHJhc2ggPSBUcmFzaEZhY3RvcnkuY3JlYXRlKDUwLCB0aGlzLmdhbWVTaXplLCB0aGlzLmNvbnRleHQsIG9ic3RhY2xlcy5leGNlcHQpO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGQoW3RoaXMuZ2FyYmFnZU1hbl0sIHRoaXMub2JzdGFjbGVzLCAob2JqZWN0MTogQmFzZUVudGl0eSwgb2JqZWN0MjogQmFzZUVudGl0eSkgPT4ge1xuICAgICAgaWYgKHRoaXMuZW5kR2FtZUNhbGxiYWNrKSB0aGlzLmVuZEdhbWVDYWxsYmFjaygpO1xuICAgICAgdGhpcy5zdGFydCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGQoW3RoaXMuZ2FyYmFnZU1hbl0sIHRoaXMudHJhc2gsIChvYmplY3QxOiBCYXNlRW50aXR5LCBvYmplY3QyOiBCYXNlRW50aXR5KSA9PiB7XG4gICAgICBvYmplY3QyLnNldFBvc2l0aW9uKFstNTAwMCwgLTUwMDBdKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpc2lvbnMgPSBWaXNpb25GYWN0b3J5LmNyZWF0ZSh0aGlzLmdhcmJhZ2VNYW4uY3JlYXRlVmlzaW9uKDIpLCB0aGlzLmNvbnRleHQpO1xuXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfTtcblxuICB1cGRhdGUgPSAoKSA9PiB7XG4gICAgdGhpcy5jbGVhcigpO1xuXG4gICAgdGhpcy52aXNpb25zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LnVwZGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5nYXJiYWdlTWFuLnVwZGF0ZSgpO1xuXG4gICAgdGhpcy50cmFzaC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgZWxlbWVudC51cGRhdGUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMub2JzdGFjbGVzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LnVwZGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMudXBkYXRlQ2FsbGJhY2spXG4gICAgICB0aGlzLnVwZGF0ZUNhbGxiYWNrKFN0YXRlTWFwLmNyZWF0ZVN0YXRlTWFwKHRoaXMuZ2FyYmFnZU1hbi5jcmVhdGVWaXNpb24oMiksIFt0aGlzLm9ic3RhY2xlcywgdGhpcy50cmFzaF0pKTtcblxuICAgIHRoaXMuY29sbGlkZXIuY2hlY2soKTtcbiAgfTtcblxuICBjbGVhciA9ICgpID0+IHtcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICB9O1xuXG4gIHJlc2V0ID0gKCkgPT4ge1xuICAgIHRoaXMuY29sbGlkZXIucmVzZXQoKTtcbiAgfTtcblxuICBtb3ZlID0gKGRpcmVjdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5nYXJiYWdlTWFuLm1vdmUoZGlyZWN0aW9uKTtcblxuICAgIHRoaXMudmlzaW9ucy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgZWxlbWVudC5tb3ZlKGRpcmVjdGlvbik7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgR2FyYmFnZU1hbiB9IGZyb20gJy4vR2FyYmFnZU1hbic7XG5pbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuXG5leHBvcnQgY2xhc3MgR2FyYmFnZU1hbkZhY3Rvcnkge1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShjb250ZXh0OiBhbnksIGdhbWVTaXplOiBudW1iZXIpOiBHYXJiYWdlTWFuIHtcbiAgICBjb25zdCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZVNpemUpO1xuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lU2l6ZSk7XG4gICAgcmV0dXJuIG5ldyBHYXJiYWdlTWFuKFB4LnRvU3EoMSksIFB4LnRvU3EoeCksIFB4LnRvU3EoeSksIGNvbnRleHQsICdyZWQnKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJy4vQmFzZUVudGl0eSc7XG5pbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuXG5leHBvcnQgY2xhc3MgR2FyYmFnZU1hbiBleHRlbmRzIEJhc2VFbnRpdHkge1xuICBjcmVhdGVWaXNpb24gPSAocmFkaXVzOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICBjb25zdCBiYXNlUG9zaXRpb24gPSB7IHg6IFB4LnRvUHgocG9zaXRpb25bMF0pIC0gcmFkaXVzLCB5OiBQeC50b1B4KHBvc2l0aW9uWzFdKSAtIHJhZGl1cyB9O1xuICAgIGNvbnN0IGZ1bGxSYWRpdXMgPSByYWRpdXMgKiAyICsgMTtcblxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGZ1bGxSYWRpdXM7IHJvdysrKSB7XG4gICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCBmdWxsUmFkaXVzOyBjb2x1bW4rKykge1xuICAgICAgICBwb3NpdGlvbnMucHVzaChgJHtiYXNlUG9zaXRpb24ueCArIGNvbHVtbn0sJHtiYXNlUG9zaXRpb24ueSArIHJvd31gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb25zO1xuICB9O1xuXG4gIG1vdmUgPSAoZGlyZWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIHRoaXMueCAtPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICB0aGlzLnggKz0gdGhpcy5zaXplO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgIHRoaXMueSAtPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgIHRoaXMueSArPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IFRyYXNoIH0gZnJvbSAnLi9UcmFzaCc7XG5pbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuXG5leHBvcnQgY2xhc3MgVHJhc2hGYWN0b3J5IHtcbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoY291bnQ6IG51bWJlciwgZ2FtZVNpemU6IG51bWJlciwgY29udGV4dDogYW55LCBleGNlcHQ/OiBzdHJpbmdbXSk6IFRyYXNoW10ge1xuICAgIGNvbnN0IHRyYXNoOiBUcmFzaFtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IFRyYXNoRmFjdG9yeS5nZW5lcmF0ZVVuaXF1ZShnYW1lU2l6ZSwgZXhjZXB0KTtcbiAgICAgIGV4Y2VwdC5wdXNoKHBvc2l0aW9uKTtcblxuICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHBvc2l0aW9uLnNwbGl0KCcsJylbMF0pO1xuICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBvc2l0aW9uLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdHJhc2gucHVzaChuZXcgVHJhc2goUHgudG9TcSgxKSwgUHgudG9TcSh4KSwgUHgudG9TcSh5KSwgY29udGV4dCwgJ2JsdWUnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYXNoO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVVuaXF1ZSA9IChnYW1lU2l6ZTogbnVtYmVyLCBleGNlcHQ6IHN0cmluZ1tdKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVTaXplKX0sJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lU2l6ZSl9YDtcblxuICAgIGlmIChleGNlcHQuZmluZChwb3MgPT4gcG9zID09PSBwb3NpdGlvbikpIHtcbiAgICAgIHJldHVybiBUcmFzaEZhY3RvcnkuZ2VuZXJhdGVVbmlxdWUoZ2FtZVNpemUsIGV4Y2VwdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJy4vQmFzZUVudGl0eSc7XG5pbXBvcnQgeyBFbnRpdHlUeXBlIH0gZnJvbSAnLi9FbnRpdHlUeXBlJztcblxuZXhwb3J0IGNsYXNzIFRyYXNoIGV4dGVuZHMgQmFzZUVudGl0eSB7XG4gIGdldFR5cGUgPSAoKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gRW50aXR5VHlwZS5UUkFTSDtcbiAgfTtcbn1cbiIsImltcG9ydCB7IFB4IH0gZnJvbSAnLi4vdXRpbC9QeCc7XG5pbXBvcnQgeyBPYnN0YWNsZSB9IGZyb20gJy4vT2JzdGFjbGUnO1xuaW1wb3J0IHsgR2VuZXJhdGVkRW50aXR5IH0gZnJvbSAnLi9HZW5lcmF0ZWRFbnRpdGllcyc7XG5cbmV4cG9ydCBjbGFzcyBPYnN0YWNsZUZhY3Rvcnkge1xuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShjb3VudDogbnVtYmVyLCBnYW1lU2l6ZTogbnVtYmVyLCBjb250ZXh0OiBhbnksIGV4Y2VwdD86IHN0cmluZ1tdKTogR2VuZXJhdGVkRW50aXR5IHtcbiAgICBjb25zdCBvYnN0YWNsZXM6IE9ic3RhY2xlW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gT2JzdGFjbGVGYWN0b3J5LmdlbmVyYXRlVW5pcXVlKGdhbWVTaXplLCBleGNlcHQpO1xuICAgICAgZXhjZXB0LnB1c2gocG9zaXRpb24pO1xuXG4gICAgICBjb25zdCB4ID0gcGFyc2VJbnQocG9zaXRpb24uc3BsaXQoJywnKVswXSk7XG4gICAgICBjb25zdCB5ID0gcGFyc2VJbnQocG9zaXRpb24uc3BsaXQoJywnKVsxXSk7XG4gICAgICBvYnN0YWNsZXMucHVzaChuZXcgT2JzdGFjbGUoUHgudG9TcSgxKSwgUHgudG9TcSh4KSwgUHgudG9TcSh5KSwgY29udGV4dCwgJ2JsYWNrJykpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGVudGl0aWVzOiBvYnN0YWNsZXMsIGV4Y2VwdCB9O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVVuaXF1ZSA9IChnYW1lU2l6ZTogbnVtYmVyLCBleGNlcHQ6IHN0cmluZ1tdKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVTaXplKX0sJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lU2l6ZSl9YDtcblxuICAgIGlmIChleGNlcHQuZmluZChwb3MgPT4gcG9zID09PSBwb3NpdGlvbikpIHtcbiAgICAgIHJldHVybiBPYnN0YWNsZUZhY3RvcnkuZ2VuZXJhdGVVbmlxdWUoZ2FtZVNpemUsIGV4Y2VwdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9O1xuXG4gIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVGZW5jZSA9IChnYW1lU2l6ZTogbnVtYmVyLCBjb250ZXh0OiBhbnkpID0+IHtcbiAgICBjb25zdCBvYnN0YWNsZXM6IE9ic3RhY2xlW10gPSBbXTtcbiAgICBjb25zdCBleGNlcHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVTaXplOyB4KyspIHtcbiAgICAgIGV4Y2VwdC5wdXNoKGAke3h9LCR7MH1gKTtcbiAgICAgIG9ic3RhY2xlcy5wdXNoKG5ldyBPYnN0YWNsZShQeC50b1NxKDEpLCBQeC50b1NxKHgpLCBQeC50b1NxKDApLCBjb250ZXh0LCAnYmxhY2snKSk7XG4gICAgICBleGNlcHQucHVzaChgJHt4fSwke2dhbWVTaXplIC0gMX1gKTtcbiAgICAgIG9ic3RhY2xlcy5wdXNoKG5ldyBPYnN0YWNsZShQeC50b1NxKDEpLCBQeC50b1NxKHgpLCBQeC50b1NxKGdhbWVTaXplIC0gMSksIGNvbnRleHQsICdibGFjaycpKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGdhbWVTaXplOyB5KyspIHtcbiAgICAgIGV4Y2VwdC5wdXNoKGAkezB9LCR7eX1gKTtcbiAgICAgIG9ic3RhY2xlcy5wdXNoKG5ldyBPYnN0YWNsZShQeC50b1NxKDEpLCBQeC50b1NxKDApLCBQeC50b1NxKHkpLCBjb250ZXh0LCAnYmxhY2snKSk7XG4gICAgICBleGNlcHQucHVzaChgJHtnYW1lU2l6ZSAtIDF9LCR7eX1gKTtcbiAgICAgIG9ic3RhY2xlcy5wdXNoKG5ldyBPYnN0YWNsZShQeC50b1NxKDEpLCBQeC50b1NxKGdhbWVTaXplIC0gMSksIFB4LnRvU3EoeSksIGNvbnRleHQsICdibGFjaycpKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBlbnRpdGllczogb2JzdGFjbGVzLCBleGNlcHQgfTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IEJhc2VFbnRpdHkgfSBmcm9tICcuL0Jhc2VFbnRpdHknO1xuaW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gJy4vRW50aXR5VHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBPYnN0YWNsZSBleHRlbmRzIEJhc2VFbnRpdHkge1xuICBnZXRUeXBlID0gKCk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIEVudGl0eVR5cGUuT0JTVEFDTEU7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBCYXNlRW50aXR5IH0gZnJvbSAnLi9CYXNlRW50aXR5JztcblxuaW50ZXJmYWNlIENvbGxpZGUge1xuICBlbnRpdGllczE6IEJhc2VFbnRpdHlbXTtcbiAgZW50aXRpZXMyOiBCYXNlRW50aXR5W107XG4gIGNhbGxiYWNrOiBDYWxsYWJsZUZ1bmN0aW9uO1xufVxuXG5leHBvcnQgY2xhc3MgQ29sbGlkZXIge1xuICBwcml2YXRlIG1hcDogQ29sbGlkZVtdID0gW107XG5cbiAgYWRkID0gKGVudGl0aWVzMTogQmFzZUVudGl0eVtdLCBlbnRpdGllczI6IEJhc2VFbnRpdHlbXSwgY2FsbGJhY2s6IENhbGxhYmxlRnVuY3Rpb24pID0+IHtcbiAgICB0aGlzLm1hcC5wdXNoKHsgZW50aXRpZXMxLCBlbnRpdGllczIsIGNhbGxiYWNrIH0pO1xuICB9O1xuXG4gIGNoZWNrID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbGxpZGVlczogYW55ID0gW107XG4gICAgdGhpcy5tYXAuZm9yRWFjaCgoY29sbGlkZSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgY29sbGlkZWVzW2luZGV4XSA9IFtdO1xuXG4gICAgICBjb2xsaWRlLmVudGl0aWVzMS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBjb2xsaWRlZXNbaW5kZXhdW2VsZW1lbnQuZ2V0U3RyaW5nUG9zaXRpdG9uKCldID0gZWxlbWVudDtcbiAgICAgIH0pO1xuICAgICAgY29sbGlkZS5lbnRpdGllczIuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgaWYgKGVsZW1lbnQuZ2V0U3RyaW5nUG9zaXRpdG9uKCkgaW4gY29sbGlkZWVzW2luZGV4XSkge1xuICAgICAgICAgIGNvbGxpZGUuY2FsbGJhY2soY29sbGlkZWVzW2luZGV4XVtlbGVtZW50LmdldFN0cmluZ1Bvc2l0aXRvbigpXSwgZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJlc2V0ID0gKCkgPT4ge1xuICAgIHRoaXMubWFwID0gW107XG4gIH07XG59XG4iLCJpbXBvcnQgeyBWaXNpb24gfSBmcm9tICcuL1Zpc2lvbic7XG5pbXBvcnQgeyBQeCB9IGZyb20gJy4uL3V0aWwvUHgnO1xuXG5leHBvcnQgY2xhc3MgVmlzaW9uRmFjdG9yeSB7XG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHBvc2l0aW9uczogc3RyaW5nW10sIGNvbnRleHQ6IGFueSkge1xuICAgIGNvbnN0IHZpc2lvbnM6IFZpc2lvbltdID0gW107XG5cbiAgICBwb3NpdGlvbnMuZm9yRWFjaChwb3NpdGlvbiA9PiB7XG4gICAgICBjb25zdCB4ID0gcGFyc2VJbnQocG9zaXRpb24uc3BsaXQoJywnKVswXSk7XG4gICAgICBjb25zdCB5ID0gcGFyc2VJbnQocG9zaXRpb24uc3BsaXQoJywnKVsxXSk7XG5cbiAgICAgIHZpc2lvbnMucHVzaChuZXcgVmlzaW9uKFB4LnRvU3EoMSksIFB4LnRvU3EoeCksIFB4LnRvU3EoeSksIGNvbnRleHQsICd5ZWxsb3cnKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdmlzaW9ucztcbiAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJy4vQmFzZUVudGl0eSc7XG5cbmV4cG9ydCBjbGFzcyBWaXNpb24gZXh0ZW5kcyBCYXNlRW50aXR5IHtcbiAgbW92ZSA9IChkaXJlY3Rpb246IHN0cmluZykgPT4ge1xuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgdGhpcy54IC09IHRoaXMuc2l6ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgIHRoaXMueCArPSB0aGlzLnNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgdGhpcy55IC09IHRoaXMuc2l6ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgdGhpcy55ICs9IHRoaXMuc2l6ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJy4vQmFzZUVudGl0eSc7XG5pbXBvcnQgeyBFbnRpdHlUeXBlIH0gZnJvbSAnLi9FbnRpdHlUeXBlJztcblxuZXhwb3J0IGNsYXNzIFN0YXRlTWFwIHtcbiAgcHVibGljIHN0YXRpYyBjcmVhdGVTdGF0ZU1hcCA9ICh2aXNpb246IHN0cmluZ1tdLCBlbnRpdGllczogQmFzZUVudGl0eVtdW10pID0+IHtcbiAgICBjb25zdCBzdGF0ZU1hcDogYW55ID0ge307XG4gICAgZW50aXRpZXMuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQuZm9yRWFjaChlbnRpdHkgPT4gKHN0YXRlTWFwW2VudGl0eS5nZXRTdHJpbmdQb3NpdGl0b25JblB4KCldID0gZW50aXR5KSkpO1xuXG4gICAgY29uc3Qgc3RhdGU6IGFueSA9IFtdO1xuICAgIHZpc2lvbi5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQgaW4gc3RhdGVNYXApIHtcbiAgICAgICAgc3RhdGUucHVzaChzdGF0ZU1hcFtlbGVtZW50XS5nZXRUeXBlKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucHVzaChFbnRpdHlUeXBlLlZPSUQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXRlLmpvaW4oJywnKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IFF0YWJsZSB9IGZyb20gJy4vUXRhYmxlJztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4vQWN0aW9uJztcbmltcG9ydCB7IEZyYW1lQnVmZmVyIH0gZnJvbSAnLi9GcmFtZUJ1ZmZlcic7XG5pbXBvcnQgeyBFbnRpdHlUeXBlIH0gZnJvbSAnLi4vZ2FtZS9FbnRpdHlUeXBlJztcblxuZXhwb3J0IGNsYXNzIEFnZW50IHtcbiAgcHVibGljIHF0YWJsZTogUXRhYmxlO1xuICBwcml2YXRlIGdhbW1hOiBudW1iZXIgPSAwLjg7XG4gIHByaXZhdGUgYWxwaGE6IG51bWJlciA9IDAuMTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnF0YWJsZSA9IG5ldyBRdGFibGUoKTtcbiAgfVxuXG4gIGdldEFjdGlvbiA9IChzdGF0ZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdGFrZVJhbmRvbURlY2lzaW9uID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApICUgOTAwMDE7XG4gICAgaWYgKHRha2VSYW5kb21EZWNpc2lvbiA9PSAwKSB7XG4gICAgICByZXR1cm4gQWN0aW9uLnJhbmRvbSgpO1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnF0YWJsZS50YWJsZSkubGVuZ3RoIDwgMzAwMDApIHtcbiAgICAgIHJldHVybiBBY3Rpb24ucmFuZG9tKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmV3YXJkczogYW55ID0ge1xuICAgICAgdXA6IHRoaXMucXRhYmxlLmdldFEoc3RhdGUsIEFjdGlvbi5VUCksXG4gICAgICBkb3duOiB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uRE9XTiksXG4gICAgICBsZWZ0OiB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uTEVGVCksXG4gICAgICByaWdodDogdGhpcy5xdGFibGUuZ2V0UShzdGF0ZSwgQWN0aW9uLlJJR0hUKVxuICAgIH07XG5cbiAgICBjb25zb2xlLnRhYmxlKHJld2FyZHMpO1xuICAgIGNvbnN0IGhpZ2hlc3RSZXdhcmQgPSBPYmplY3Qua2V5cyhyZXdhcmRzKS5yZWR1Y2UoKGEsIGIpID0+IChyZXdhcmRzW2FdID4gcmV3YXJkc1tiXSA/IGEgOiBiKSk7XG5cbiAgICBzd2l0Y2ggKGhpZ2hlc3RSZXdhcmQpIHtcbiAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgcmV0dXJuIEFjdGlvbi5VUDtcbiAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICByZXR1cm4gQWN0aW9uLkRPV047XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgcmV0dXJuIEFjdGlvbi5MRUZUO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICByZXR1cm4gQWN0aW9uLlJJR0hUO1xuICAgIH1cbiAgfTtcblxuICBleGVjdXRlQWN0aW9uID0gKGFjdGlvbjogbnVtYmVyLCBkb2N1bWVudDogYW55KSA9PiB7XG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgQWN0aW9uLlVQOlxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleWRvd24nLCB7IGtleUNvZGU6ICczOCcgfSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQWN0aW9uLkRPV046XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgS2V5Ym9hcmRFdmVudCgna2V5ZG93bicsIHsga2V5Q29kZTogJzQwJyB9KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBBY3Rpb24uTEVGVDpcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgeyBrZXlDb2RlOiAnMzcnIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFjdGlvbi5SSUdIVDpcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgeyBrZXlDb2RlOiAnMzknIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuXG4gIHJld2FyZCA9IChmcmFtZUJ1ZmZlcjogRnJhbWVCdWZmZXIpID0+IHtcbiAgICBmb3IgKGxldCBpID0gZnJhbWVCdWZmZXIuYnVmZmVyLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBjb25zdCBtaWRkbGVJbmRleCA9IChmcmFtZUJ1ZmZlci5idWZmZXIubGVuZ3RoIC0gMSkgLyAyO1xuXG4gICAgICBjb25zdCBzdGF0ZSA9IGZyYW1lQnVmZmVyLmJ1ZmZlcltpXS5zdGF0ZTtcbiAgICAgIGNvbnN0IGFycmF5U3RhdGUgPSBzdGF0ZS5zcGxpdCgnLCcpO1xuXG4gICAgICBsZXQgcmV3YXJkOiBudW1iZXI7XG4gICAgICBpZiAoZnJhbWVCdWZmZXIuYnVmZmVyW2kgLSAxXSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c0ZyYW1lID0gZnJhbWVCdWZmZXIuYnVmZmVyW2kgLSAxXTtcbiAgICAgICAgaWYgKHBhcnNlSW50KGFycmF5U3RhdGVbbWlkZGxlSW5kZXhdKSA9PT0gRW50aXR5VHlwZS5PQlNUQUNMRSkge1xuICAgICAgICAgIHJld2FyZCA9IC01O1xuICAgICAgICAgIC8vdGhpcy5xdGFibGUuc2V0UShwcmV2aW91c0ZyYW1lLnN0YXRlLCBwcmV2aW91c0ZyYW1lLmFjdGlvbiwgLTUpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGFycmF5U3RhdGVbbWlkZGxlSW5kZXhdKSA9PT0gRW50aXR5VHlwZS5UUkFTSCkge1xuICAgICAgICAgIHJld2FyZCA9IDU7XG4gICAgICAgICAgLy90aGlzLnF0YWJsZS5zZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uLCA1KTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChhcnJheVN0YXRlW21pZGRsZUluZGV4XSkgPT09IEVudGl0eVR5cGUuVk9JRCkge1xuICAgICAgICAgIHJld2FyZCA9IDE7XG4gICAgICAgICAgLy90aGlzLnF0YWJsZS5zZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXdhcmQpIHtcbiAgICAgICAgICBjb25zdCBvcHRpbWFsRnV0dXJlVmFsdWUgPSBNYXRoLm1heChcbiAgICAgICAgICAgIHRoaXMucXRhYmxlLmdldFEoc3RhdGUsIEFjdGlvbi5VUCksXG4gICAgICAgICAgICB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uRE9XTiksXG4gICAgICAgICAgICB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uTEVGVCksXG4gICAgICAgICAgICB0aGlzLnF0YWJsZS5nZXRRKHN0YXRlLCBBY3Rpb24uUklHSFQpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNvbnN0IHVwZGF0ZVZhbHVlID1cbiAgICAgICAgICAgIHRoaXMuYWxwaGEgKlxuICAgICAgICAgICAgKHJld2FyZCArIHRoaXMuZ2FtbWEgKiBvcHRpbWFsRnV0dXJlVmFsdWUgLSB0aGlzLnF0YWJsZS5nZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uKSk7XG5cbiAgICAgICAgICB0aGlzLnF0YWJsZS5zZXRRKHByZXZpb3VzRnJhbWUuc3RhdGUsIHByZXZpb3VzRnJhbWUuYWN0aW9uLCB1cGRhdGVWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG4iLCJleHBvcnQgY2xhc3MgUXRhYmxlIHtcbiAgcHVibGljIHRhYmxlOiBhbnkgPSB7fTtcblxuICBnZXRRID0gKHN0YXRlOiBzdHJpbmcsIGFjdGlvbjogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBgJHtzdGF0ZX0sJHthY3Rpb259YDtcbiAgICBpZiAoIShjb25maWcgaW4gdGhpcy50YWJsZSkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRhYmxlW2NvbmZpZ107XG4gIH07XG5cbiAgc2V0USA9IChzdGF0ZTogc3RyaW5nLCBhY3Rpb246IG51bWJlciwgcmV3YXJkOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBgJHtzdGF0ZX0sJHthY3Rpb259YDtcbiAgICBpZiAoIShjb25maWcgaW4gdGhpcy50YWJsZSkpIHtcbiAgICAgIHRoaXMudGFibGVbY29uZmlnXSA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy50YWJsZVtjb25maWddICs9IHJld2FyZDtcbiAgfTtcbn1cbiIsImV4cG9ydCBjbGFzcyBBY3Rpb24ge1xuICBzdGF0aWMgVVAgPSAxO1xuICBzdGF0aWMgRE9XTiA9IDI7XG4gIHN0YXRpYyBMRUZUID0gMztcbiAgc3RhdGljIFJJR0hUID0gNDtcblxuICBwdWJsaWMgc3RhdGljIHRvQXJyYXkgPSAoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoQWN0aW9uKTtcbiAgfTtcblxuICBwdWJsaWMgc3RhdGljIHJhbmRvbSA9ICgpID0+IHtcbiAgICBjb25zdCBhcnJheSA9IFsxLCAyLCAzLCA0XTtcbiAgICByZXR1cm4gYXJyYXlbKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpIHwgMF07XG4gIH07XG59XG4iLCJpbnRlcmZhY2UgQnVmZmVyIHtcbiAgc3RhdGU6IHN0cmluZztcbiAgYWN0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRnJhbWVCdWZmZXIge1xuICBwdWJsaWMgYnVmZmVyOiBCdWZmZXJbXSA9IFtdO1xuXG4gIGFkZCA9IChzdGF0ZTogc3RyaW5nLCBhY3Rpb246IG51bWJlcikgPT4ge1xuICAgIHRoaXMuYnVmZmVyLnB1c2goeyBzdGF0ZSwgYWN0aW9uIH0pO1xuICB9O1xuXG4gIGNsZWFyID0gKCkgPT4ge1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gIH07XG59XG4iXSwic291cmNlUm9vdCI6IiJ9